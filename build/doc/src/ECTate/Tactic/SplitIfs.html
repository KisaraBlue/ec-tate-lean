<html lang="en" class="alectryon-standalone"><head><meta charset="UTF-8"></meta><meta name="viewport" content="width=device-width, initial-scale=1"></meta><link rel="stylesheet" href="../../.././src/alectryon.css"></link><link rel="stylesheet" href="../../.././src/pygments.css"></link><link rel="stylesheet" href="../../.././src/docutils_basic.css"></link><link rel="shortcut icon" href="../../.././favicon.ico"></link><script defer="true" src="../../.././src/alectryon.js"></script></head><body><article class="alectryon-root alectryon-centered"><div class="alectryon-banner">Built with <a href="https://github.com/leanprover/doc-gen4">doc-gen4</a>, running Lean4.
      Bubbles (<span class="alectryon-bubble"></span>) indicate interactive fragments: hover for details, tap to reveal contents.
      Use <kbd>Ctrl+â†‘</kbd><kbd>Ctrl+â†“</kbd>to navigate, <kbd>Ctrl+ğŸ–±ï¸</kbd>to focus.
      On Mac, use <kbd>Cmd</kbd>instead of <kbd>Ctrl</kbd>.
    </div><pre class="alectryon-io highlight"><span class="alectryon-wsp"><span class="alectryon-token">/-
Copyright (c) 2018 Gabriel Ebner. All rights reserved.
Released under Apache 2.0 license as described in the file LICENSE.
Authors: Gabriel Ebner, David Renshaw
-/
import Lean
import Mathlib.Init.Logic
import Mathlib.Tactic.Core

/-!
Tactic to split if-then-else expressions.

THIS FILE WRITTEN BY DAVID RENSHAW AND PRED TO MATHLIB4 TODO remove

-/

</span><span class="alectryon-token"><span class="k">namespace</span></span><span class="alectryon-token"> Mathlib.Tactic

</span><span class="alectryon-token"><span class="k">open</span></span><span class="alectryon-token"> Lean Elab.Tactic Parser.Tactic Lean.Meta

/-- Simulates the `<;>` tactic combinator.
-/
</span><span class="alectryon-token"><span class="k">private</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><span class="k">def</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>tac_and_then</var><b>: </b><span><span class="fn"><span class="fn"><a href="../../.././Lean/Elab/Tactic/Basic.html#Lean.Elab.Tactic.TacticM">TacticM</a> <a href="../../.././Init/Prelude.html#Unit">Unit</a></span> â†’ <span class="fn"><a href="../../.././Lean/Elab/Tactic/Basic.html#Lean.Elab.Tactic.TacticM">TacticM</a> <a href="../../.././Init/Prelude.html#Unit">Unit</a></span> â†’ <span class="fn"><a href="../../.././Lean/Elab/Tactic/Basic.html#Lean.Elab.Tactic.TacticM">TacticM</a> <a href="../../.././Init/Prelude.html#Unit">Unit</a></span></span></span></span></div></blockquote></div></small></div><span class="nv">tac_and_then</span></span><span class="alectryon-token"> : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>TacticM</var><b>: </b><span><span class="fn"><span class="fn">Type</span> â†’ <span class="fn">Type</span></span></span></span></div></blockquote></div></small></div>TacticM</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Unit</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div>Unit</span><span class="alectryon-token"> â†’ </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>TacticM</var><b>: </b><span><span class="fn"><span class="fn">Type</span> â†’ <span class="fn">Type</span></span></span></span></div></blockquote></div></small></div>TacticM</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Unit</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div>Unit</span><span class="alectryon-token"> â†’ </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>TacticM</var><b>: </b><span><span class="fn"><span class="fn">Type</span> â†’ <span class="fn">Type</span></span></span></span></div></blockquote></div></small></div>TacticM</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Unit</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div>Unit</span><span class="alectryon-token"> :=
</span><span class="alectryon-token"><span class="k">fun</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>tac1</var><b>: </b><span><span class="fn">?m.10</span></span></span></div></blockquote></div></small></div><span class="nv">tac1</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>tac2</var><b>: </b><span><span class="fn">?m.13</span></span></span></div></blockquote></div></small></div><span class="nv">tac2</span></span><span class="alectryon-token"> => </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>focus</var><b>: </b><span><span class="fn">{<span class="fn">Î±</span> : <span class="fn">Type</span>} â†’ <span class="fn"><span class="fn"><a href="../../.././Lean/Elab/Tactic/Basic.html#Lean.Elab.Tactic.TacticM">TacticM</a> <span class="fn">Î±</span></span> â†’ <span class="fn"><a href="../../.././Lean/Elab/Tactic/Basic.html#Lean.Elab.Tactic.TacticM">TacticM</a> <span class="fn">Î±</span></span></span></span></span></span></div></blockquote></div></small></div>focus</span><span class="alectryon-token"> </span><span class="alectryon-token"><span class="k">do</span></span><span class="alectryon-token">
  </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>tac1</var><b>: </b><span><span class="fn">?m.10</span></span></span></div></blockquote></div></small></div><span class="nv">tac1</span></span><span class="alectryon-token">
  </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>allGoals</var><b>: </b><span><span class="fn"><span class="fn"><a href="../../.././Lean/Elab/Tactic/Basic.html#Lean.Elab.Tactic.TacticM">TacticM</a> <a href="../../.././Init/Prelude.html#Unit">Unit</a></span> â†’ <span class="fn"><a href="../../.././Lean/Elab/Tactic/Basic.html#Lean.Elab.Tactic.TacticM">TacticM</a> <a href="../../.././Init/Prelude.html#Unit">Unit</a></span></span></span></span></div></blockquote></div></small></div>allGoals</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>tac2</var><b>: </b><span><span class="fn">?m.13</span></span></span></div></blockquote></div></small></div><span class="nv">tac2</span></span><span class="alectryon-token">

/-- A position where a split may apply.
-/
</span><span class="alectryon-token"><span class="k">private</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><span class="k">inductive</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>SplitPosition</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div><span class="nv">SplitPosition</span></span><span class="alectryon-token">
| </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>target</var><b>: </b><span><span class="fn">Mathlib.Tactic.SplitPosition</span></span></span></div></blockquote></div></small></div>target</span><span class="alectryon-token">
| </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>hyp</var><b>: </b><span><span class="fn"><a href="../../.././Lean/Expr.html#Lean.FVarId">FVarId</a> â†’ <span class="fn">Mathlib.Tactic.SplitPosition</span></span></span></span></div></blockquote></div></small></div>hyp</span><span class="alectryon-token"> (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>fvarId</var><b>: </b><span><a href="../../.././Lean/Expr.html#Lean.FVarId">FVarId</a></span></span></div></blockquote></div></small></div><span class="nv">fvarId</span></span><span class="alectryon-token">: </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>FVarId</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div>FVarId</span><span class="alectryon-token">)

/-- Collects a list of positions pointed to by `loc` and their types.
-/
</span><span class="alectryon-token"><span class="k">private</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><span class="k">def</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>getSplitCandidates</var><b>: </b><span><span class="fn"><a href="../../.././Lean/Elab/Tactic/Location.html#Lean.Elab.Tactic.Location">Location</a> â†’ <span class="fn"><a href="../../.././Lean/Elab/Tactic/Basic.html#Lean.Elab.Tactic.TacticM">TacticM</a> (<span class="fn"><a href="../../.././Init/Prelude.html#List">List</a> (<span class="fn"><span class="fn">Mathlib.Tactic.SplitPosition</span> <a href="../../.././Init/Prelude.html#Prod">Ã—</a> <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a></span>)</span>)</span></span></span></span></div></blockquote></div></small></div><span class="nv">getSplitCandidates</span></span><span class="alectryon-token"> (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>loc</var><b>: </b><span><a href="../../.././Lean/Elab/Tactic/Location.html#Lean.Elab.Tactic.Location">Location</a></span></span></div></blockquote></div></small></div><span class="nv">loc</span></span><span class="alectryon-token"> : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Location</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div>Location</span><span class="alectryon-token">) : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>TacticM</var><b>: </b><span><span class="fn"><span class="fn">Type</span> â†’ <span class="fn">Type</span></span></span></span></div></blockquote></div></small></div>TacticM</span><span class="alectryon-token"> (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>List</var><b>: </b><span><span class="fn"><span class="fn">Type ?u.1005</span> â†’ <span class="fn">Type ?u.1005</span></span></span></span></div></blockquote></div></small></div>List</span><span class="alectryon-token"> (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>SplitPosition</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div>SplitPosition</span><span class="alectryon-token"> Ã— </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Expr</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div>Expr</span><span class="alectryon-token">)) :=
</span><span class="alectryon-token"><span class="k">match</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>loc</var><b>: </b><span><a href="../../.././Lean/Elab/Tactic/Location.html#Lean.Elab.Tactic.Location">Location</a></span></span></div></blockquote></div></small></div><span class="nv">loc</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><span class="k">with</span></span><span class="alectryon-token">
| </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Location.wildcard</var><b>: </b><span><a href="../../.././Lean/Elab/Tactic/Location.html#Lean.Elab.Tactic.Location">Location</a></span></span></div></blockquote></div></small></div>Location.wildcard</span><span class="alectryon-token"> => </span><span class="alectryon-token"><span class="k">do</span></span><span class="alectryon-token">
   </span><span class="alectryon-token"><span class="k">let</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>candidates</var><b>: </b><span><span class="fn">?m.1472</span></span></span></div></blockquote></div></small></div><span class="nv">candidates</span></span><span class="alectryon-token"> â† </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>(â† getLCtx)</var><b>: </b><span><span class="fn">?m.1105</span></span></span></div></blockquote></div></small></div><span class="nv">(â† </span></span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>getLCtx</var><b>: </b><span><span class="fn">{<span class="fn">m</span> : <span class="fn"><span class="fn">Type</span> â†’ <span class="fn">Type</span></span>} â†’ <span class="fn">[<span class="fn">self</span> : <span class="fn"><a href="../../.././Lean/LocalContext.html#Lean.MonadLCtx">MonadLCtx</a> <span class="fn">m</span></span>] â†’ <span class="fn"><span class="fn">m</span> <a href="../../.././Lean/LocalContext.html#Lean.LocalContext">LocalContext</a></span></span></span></span></span></div></blockquote></div></small></div><span class="nv">getLCtx</span></span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>(â† getLCtx)</var><b>: </b><span><span class="fn">?m.1105</span></span></span></div></blockquote></div></small></div><span class="nv">)</span></span><span class="alectryon-token">.</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>getFVarIds</var><b>: </b><span><span class="fn"><a href="../../.././Lean/LocalContext.html#Lean.LocalContext">LocalContext</a> â†’ <span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <a href="../../.././Lean/Expr.html#Lean.FVarId">FVarId</a></span></span></span></span></div></blockquote></div></small></div><span class="na">getFVarIds</span></span><span class="alectryon-token"><span class="na">.</span></span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>mapM</var><b>: </b><span><span class="fn">{<span class="fn">Î±</span> : <span class="fn">Type ?u.1118</span>} â†’
  <span class="fn">{<span class="fn">Î²</span> : <span class="fn">Type ?u.1117</span>} â†’ <span class="fn">{<span class="fn">m</span> : <span class="fn"><span class="fn">Type ?u.1117</span> â†’ <span class="fn">Type ?u.1116</span></span>} â†’ <span class="fn">[<span class="fn">inst</span> : <span class="fn"><a href="../../.././Init/Prelude.html#Monad">Monad</a> <span class="fn">m</span></span>] â†’ <span class="fn">(<span class="fn"><span class="fn">Î±</span> â†’ <span class="fn"><span class="fn">m</span> <span class="fn">Î²</span></span></span>) â†’ <span class="fn"><span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <span class="fn">Î±</span></span> â†’ <span class="fn"><span class="fn">m</span> (<span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <span class="fn">Î²</span></span>)</span></span></span></span></span></span></span></span></span></div></blockquote></div></small></div><span class="na">mapM</span></span><span class="alectryon-token">
     (</span><span class="alectryon-token"><span class="k">fun</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>fvarId</var><b>: </b><span><span class="fn">?m.1131</span></span></span></div></blockquote></div></small></div><span class="nv">fvarId</span></span><span class="alectryon-token"> => </span><span class="alectryon-token"><span class="k">do</span></span><span class="alectryon-token">
       </span><span class="alectryon-token"><span class="k">let</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>typ</var><b>: </b><span><span class="fn">?m.1378</span></span></span></div></blockquote></div></small></div><span class="nv">typ</span></span><span class="alectryon-token"> â† </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>instantiateMVars</var><b>: </b><span><span class="fn">{<span class="fn">m</span> : <span class="fn"><span class="fn">Type</span> â†’ <span class="fn">Type</span></span>} â†’ <span class="fn">[<span class="fn">inst</span> : <span class="fn"><a href="../../.././Init/Prelude.html#Monad">Monad</a> <span class="fn">m</span></span>] â†’ <span class="fn">[<span class="fn">inst</span> : <span class="fn"><a href="../../.././Lean/MetavarContext.html#Lean.MonadMCtx">MonadMCtx</a> <span class="fn">m</span></span>] â†’ <span class="fn"><a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a> â†’ <span class="fn"><span class="fn">m</span> <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a></span></span></span></span></span></span></span></div></blockquote></div></small></div>instantiateMVars</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>(â† inferType (mkFVar fvarId))</var><b>: </b><span><span class="fn">?m.1312</span></span></span></div></blockquote></div></small></div><span class="nv">(â† </span></span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>inferType</var><b>: </b><span><span class="fn"><a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a> â†’ <span class="fn"><a href="../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">MetaM</a> <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a></span></span></span></span></div></blockquote></div></small></div><span class="nv">inferType</span></span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>(â† inferType (mkFVar fvarId))</var><b>: </b><span><span class="fn">?m.1312</span></span></span></div></blockquote></div></small></div><span class="nv"> (</span></span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>mkFVar</var><b>: </b><span><span class="fn"><a href="../../.././Lean/Expr.html#Lean.FVarId">FVarId</a> â†’ <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a></span></span></span></div></blockquote></div></small></div><span class="nv">mkFVar</span></span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>(â† inferType (mkFVar fvarId))</var><b>: </b><span><span class="fn">?m.1312</span></span></span></div></blockquote></div></small></div><span class="nv"> </span></span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>fvarId</var><b>: </b><span><span class="fn">?m.1131</span></span></span></div></blockquote></div></small></div><span class="nv">fvarId</span></span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>(â† inferType (mkFVar fvarId))</var><b>: </b><span><span class="fn">?m.1312</span></span></span></div></blockquote></div></small></div><span class="nv">))</span></span><span class="alectryon-token">
       </span><span class="alectryon-token"><span class="k">return</span></span><span class="alectryon-token"> (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>SplitPosition.hyp</var><b>: </b><span><span class="fn"><a href="../../.././Lean/Expr.html#Lean.FVarId">FVarId</a> â†’ <span class="fn">Mathlib.Tactic.SplitPosition</span></span></span></span></div></blockquote></div></small></div>SplitPosition.hyp</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>fvarId</var><b>: </b><span><span class="fn">?m.1131</span></span></span></div></blockquote></div></small></div><span class="nv">fvarId</span></span><span class="alectryon-token">, </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>typ</var><b>: </b><span><span class="fn">?m.1378</span></span></span></div></blockquote></div></small></div><span class="nv">typ</span></span><span class="alectryon-token">))
   </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>pure</var><b>: </b><span><span class="fn">{<span class="fn">f</span> : <span class="fn"><span class="fn">Type ?u.1496</span> â†’ <span class="fn">Type ?u.1495</span></span>} â†’ <span class="fn">[<span class="fn">self</span> : <span class="fn"><a href="../../.././Init/Prelude.html#Pure">Pure</a> <span class="fn">f</span></span>] â†’ <span class="fn">{<span class="fn">Î±</span> : <span class="fn">Type ?u.1496</span>} â†’ <span class="fn"><span class="fn">Î±</span> â†’ <span class="fn"><span class="fn">f</span> <span class="fn">Î±</span></span></span></span></span></span></span></span></div></blockquote></div></small></div>pure</span><span class="alectryon-token"> ((</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>SplitPosition.target</var><b>: </b><span><span class="fn">Mathlib.Tactic.SplitPosition</span></span></span></div></blockquote></div></small></div>SplitPosition.target</span><span class="alectryon-token">, â† </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>getMainTarget</var><b>: </b><span><span class="fn"><a href="../../.././Lean/Elab/Tactic/Basic.html#Lean.Elab.Tactic.TacticM">TacticM</a> <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a></span></span></span></div></blockquote></div></small></div>getMainTarget</span><span class="alectryon-token">) :: </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>candidates</var><b>: </b><span><span class="fn">?m.1472</span></span></span></div></blockquote></div></small></div><span class="nv">candidates</span></span><span class="alectryon-token">.</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>toList</var><b>: </b><span><span class="fn">{<span class="fn">Î±</span> : <span class="fn">Type ?u.1508</span>} â†’ <span class="fn"><span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <span class="fn">Î±</span></span> â†’ <span class="fn"><a href="../../.././Init/Prelude.html#List">List</a> <span class="fn">Î±</span></span></span></span></span></span></div></blockquote></div></small></div>toList</span><span class="alectryon-token">)
| </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Location.targets</var><b>: </b><span><span class="fn"><span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <a href="../../.././Init/Prelude.html#Lean.Syntax">Syntax</a></span> â†’ <span class="fn"><a href="../../.././Init/Prelude.html#Bool">Bool</a> â†’ <a href="../../.././Lean/Elab/Tactic/Location.html#Lean.Elab.Tactic.Location">Location</a></span></span></span></span></div></blockquote></div></small></div>Location.targets</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>hyps</var><b>: </b><span><span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <a href="../../.././Init/Prelude.html#Lean.Syntax">Syntax</a></span></span></span></div></blockquote></div></small></div><span class="nv">hyps</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>tgt</var><b>: </b><span><a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></div></blockquote></div></small></div><span class="nv">tgt</span></span><span class="alectryon-token"> => </span><span class="alectryon-token"><span class="k">do</span></span><span class="alectryon-token">
   </span><span class="alectryon-token"><span class="k">let</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>candidates</var><b>: </b><span><span class="fn">?m.1764</span></span></span></div></blockquote></div></small></div><span class="nv">candidates</span></span><span class="alectryon-token"> â† </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>(â† hyps.mapM getFVarId)</var><b>: </b><span><span class="fn">?m.1620</span></span></span></div></blockquote></div></small></div><span class="nv">(â† </span></span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>hyps</var><b>: </b><span><span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <a href="../../.././Init/Prelude.html#Lean.Syntax">Syntax</a></span></span></span></div></blockquote></div></small></div><span class="nv">hyps</span></span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>(â† hyps.mapM getFVarId)</var><b>: </b><span><span class="fn">?m.1620</span></span></span></div></blockquote></div></small></div><span class="nv">.</span></span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>mapM</var><b>: </b><span><span class="fn">{<span class="fn">Î±</span> : <span class="fn">Type ?u.1586</span>} â†’
  <span class="fn">{<span class="fn">Î²</span> : <span class="fn">Type ?u.1585</span>} â†’ <span class="fn">{<span class="fn">m</span> : <span class="fn"><span class="fn">Type ?u.1585</span> â†’ <span class="fn">Type ?u.1584</span></span>} â†’ <span class="fn">[<span class="fn">inst</span> : <span class="fn"><a href="../../.././Init/Prelude.html#Monad">Monad</a> <span class="fn">m</span></span>] â†’ <span class="fn">(<span class="fn"><span class="fn">Î±</span> â†’ <span class="fn"><span class="fn">m</span> <span class="fn">Î²</span></span></span>) â†’ <span class="fn"><span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <span class="fn">Î±</span></span> â†’ <span class="fn"><span class="fn">m</span> (<span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <span class="fn">Î²</span></span>)</span></span></span></span></span></span></span></span></span></div></blockquote></div></small></div><span class="nv">mapM</span></span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>(â† hyps.mapM getFVarId)</var><b>: </b><span><span class="fn">?m.1620</span></span></span></div></blockquote></div></small></div><span class="nv"> </span></span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>getFVarId</var><b>: </b><span><span class="fn"><a href="../../.././Init/Prelude.html#Lean.Syntax">Syntax</a> â†’ <span class="fn"><a href="../../.././Lean/Elab/Tactic/Basic.html#Lean.Elab.Tactic.TacticM">TacticM</a> <a href="../../.././Lean/Expr.html#Lean.FVarId">FVarId</a></span></span></span></span></div></blockquote></div></small></div><span class="nv">getFVarId</span></span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>(â† hyps.mapM getFVarId)</var><b>: </b><span><span class="fn">?m.1620</span></span></span></div></blockquote></div></small></div><span class="nv">)</span></span><span class="alectryon-token">.</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>mapM</var><b>: </b><span><span class="fn">{<span class="fn">Î±</span> : <span class="fn">Type ?u.1633</span>} â†’
  <span class="fn">{<span class="fn">Î²</span> : <span class="fn">Type ?u.1632</span>} â†’ <span class="fn">{<span class="fn">m</span> : <span class="fn"><span class="fn">Type ?u.1632</span> â†’ <span class="fn">Type ?u.1631</span></span>} â†’ <span class="fn">[<span class="fn">inst</span> : <span class="fn"><a href="../../.././Init/Prelude.html#Monad">Monad</a> <span class="fn">m</span></span>] â†’ <span class="fn">(<span class="fn"><span class="fn">Î±</span> â†’ <span class="fn"><span class="fn">m</span> <span class="fn">Î²</span></span></span>) â†’ <span class="fn"><span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <span class="fn">Î±</span></span> â†’ <span class="fn"><span class="fn">m</span> (<span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <span class="fn">Î²</span></span>)</span></span></span></span></span></span></span></span></span></div></blockquote></div></small></div><span class="na">mapM</span></span><span class="alectryon-token">
     (</span><span class="alectryon-token"><span class="k">fun</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>fvarId</var><b>: </b><span><span class="fn">?m.1646</span></span></span></div></blockquote></div></small></div><span class="nv">fvarId</span></span><span class="alectryon-token"> => </span><span class="alectryon-token"><span class="k">do</span></span><span class="alectryon-token">
       </span><span class="alectryon-token"><span class="k">let</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>typ</var><b>: </b><span><span class="fn">?m.1707</span></span></span></div></blockquote></div></small></div><span class="nv">typ</span></span><span class="alectryon-token"> â† </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>instantiateMVars</var><b>: </b><span><span class="fn">{<span class="fn">m</span> : <span class="fn"><span class="fn">Type</span> â†’ <span class="fn">Type</span></span>} â†’ <span class="fn">[<span class="fn">inst</span> : <span class="fn"><a href="../../.././Init/Prelude.html#Monad">Monad</a> <span class="fn">m</span></span>] â†’ <span class="fn">[<span class="fn">inst</span> : <span class="fn"><a href="../../.././Lean/MetavarContext.html#Lean.MonadMCtx">MonadMCtx</a> <span class="fn">m</span></span>] â†’ <span class="fn"><a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a> â†’ <span class="fn"><span class="fn">m</span> <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a></span></span></span></span></span></span></span></div></blockquote></div></small></div>instantiateMVars</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>(â† inferType (mkFVar fvarId))</var><b>: </b><span><span class="fn">?m.1683</span></span></span></div></blockquote></div></small></div><span class="nv">(â† </span></span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>inferType</var><b>: </b><span><span class="fn"><a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a> â†’ <span class="fn"><a href="../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">MetaM</a> <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a></span></span></span></span></div></blockquote></div></small></div><span class="nv">inferType</span></span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>(â† inferType (mkFVar fvarId))</var><b>: </b><span><span class="fn">?m.1683</span></span></span></div></blockquote></div></small></div><span class="nv"> (</span></span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>mkFVar</var><b>: </b><span><span class="fn"><a href="../../.././Lean/Expr.html#Lean.FVarId">FVarId</a> â†’ <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a></span></span></span></div></blockquote></div></small></div><span class="nv">mkFVar</span></span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>(â† inferType (mkFVar fvarId))</var><b>: </b><span><span class="fn">?m.1683</span></span></span></div></blockquote></div></small></div><span class="nv"> </span></span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>fvarId</var><b>: </b><span><span class="fn">?m.1646</span></span></span></div></blockquote></div></small></div><span class="nv">fvarId</span></span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>(â† inferType (mkFVar fvarId))</var><b>: </b><span><span class="fn">?m.1683</span></span></span></div></blockquote></div></small></div><span class="nv">))</span></span><span class="alectryon-token">
       </span><span class="alectryon-token"><span class="k">return</span></span><span class="alectryon-token"> (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>SplitPosition.hyp</var><b>: </b><span><span class="fn"><a href="../../.././Lean/Expr.html#Lean.FVarId">FVarId</a> â†’ <span class="fn">Mathlib.Tactic.SplitPosition</span></span></span></span></div></blockquote></div></small></div>SplitPosition.hyp</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>fvarId</var><b>: </b><span><span class="fn">?m.1646</span></span></span></div></blockquote></div></small></div><span class="nv">fvarId</span></span><span class="alectryon-token">, </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>typ</var><b>: </b><span><span class="fn">?m.1707</span></span></span></div></blockquote></div></small></div><span class="nv">typ</span></span><span class="alectryon-token">))
   </span><span class="alectryon-token"><span class="k">if</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>tgt</var><b>: </b><span><a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></div></blockquote></div></small></div><span class="nv">tgt</span></span><span class="alectryon-token">
   </span><span class="alectryon-token"><span class="k">then</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><span class="k">return</span></span><span class="alectryon-token"> (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>SplitPosition.target</var><b>: </b><span><span class="fn">Mathlib.Tactic.SplitPosition</span></span></span></div></blockquote></div></small></div>SplitPosition.target</span><span class="alectryon-token">, â† </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>getMainTarget</var><b>: </b><span><span class="fn"><a href="../../.././Lean/Elab/Tactic/Basic.html#Lean.Elab.Tactic.TacticM">TacticM</a> <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a></span></span></span></div></blockquote></div></small></div>getMainTarget</span><span class="alectryon-token">) :: </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>candidates</var><b>: </b><span><span class="fn">?m.1764</span></span></span></div></blockquote></div></small></div><span class="nv">candidates</span></span><span class="alectryon-token">.</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>toList</var><b>: </b><span><span class="fn">{<span class="fn">Î±</span> : <span class="fn">Type ?u.1873</span>} â†’ <span class="fn"><span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <span class="fn">Î±</span></span> â†’ <span class="fn"><a href="../../.././Init/Prelude.html#List">List</a> <span class="fn">Î±</span></span></span></span></span></span></div></blockquote></div></small></div>toList</span><span class="alectryon-token">
   </span><span class="alectryon-token"><span class="k">else</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><span class="k">return</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>candidates</var><b>: </b><span><span class="fn">?m.1764</span></span></span></div></blockquote></div></small></div><span class="nv">candidates</span></span><span class="alectryon-token">.</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>toList</var><b>: </b><span><span class="fn">{<span class="fn">Î±</span> : <span class="fn">Type ?u.1903</span>} â†’ <span class="fn"><span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <span class="fn">Î±</span></span> â†’ <span class="fn"><a href="../../.././Init/Prelude.html#List">List</a> <span class="fn">Î±</span></span></span></span></span></span></div></blockquote></div></small></div>toList</span><span class="alectryon-token">

/-- Finds an if condition to split. If successful, returns the position and the condition.
-/
</span><span class="alectryon-token"><span class="k">private</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><span class="k">def</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>findIfCondAt</var><b>: </b><span><span class="fn"><a href="../../.././Lean/Elab/Tactic/Location.html#Lean.Elab.Tactic.Location">Location</a> â†’ <span class="fn"><a href="../../.././Lean/Elab/Tactic/Basic.html#Lean.Elab.Tactic.TacticM">TacticM</a> (<span class="fn"><a href="../../.././Init/Prelude.html#Option">Option</a> (<span class="fn"><span class="fn">Mathlib.Tactic.SplitPosition</span> <a href="../../.././Init/Prelude.html#Prod">Ã—</a> <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a></span>)</span>)</span></span></span></span></div></blockquote></div></small></div><span class="nv">findIfCondAt</span></span><span class="alectryon-token"> (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>loc</var><b>: </b><span><a href="../../.././Lean/Elab/Tactic/Location.html#Lean.Elab.Tactic.Location">Location</a></span></span></div></blockquote></div></small></div><span class="nv">loc</span></span><span class="alectryon-token"> : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Location</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div>Location</span><span class="alectryon-token">) : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>TacticM</var><b>: </b><span><span class="fn"><span class="fn">Type</span> â†’ <span class="fn">Type</span></span></span></span></div></blockquote></div></small></div>TacticM</span><span class="alectryon-token"> (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Option</var><b>: </b><span><span class="fn"><span class="fn">Type ?u.5507</span> â†’ <span class="fn">Type ?u.5507</span></span></span></span></div></blockquote></div></small></div>Option</span><span class="alectryon-token"> (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>SplitPosition</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div>SplitPosition</span><span class="alectryon-token"> Ã— </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Expr</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div>Expr</span><span class="alectryon-token">)) := </span><span class="alectryon-token"><span class="k">do</span></span><span class="alectryon-token">
  </span><span class="alectryon-token"><span class="k">for</span></span><span class="alectryon-token"> (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>pos</var><b>: </b><span><span class="fn">Mathlib.Tactic.SplitPosition</span></span></span></div></blockquote></div></small></div><span class="nv">pos</span></span><span class="alectryon-token">, </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>e</var><b>: </b><span><a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a></span></span></div></blockquote></div></small></div><span class="nv">e</span></span><span class="alectryon-token">) </span><span class="alectryon-token"><span class="k">in</span></span><span class="alectryon-token">  </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>(â† getSplitCandidates loc)</var><b>: </b><span><span class="fn">?m.5577</span></span></span></div></blockquote></div></small></div><span class="nv">(â† </span></span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>getSplitCandidates</var><b>: </b><span><span class="fn"><a href="../../.././Lean/Elab/Tactic/Location.html#Lean.Elab.Tactic.Location">Location</a> â†’ <span class="fn"><a href="../../.././Lean/Elab/Tactic/Basic.html#Lean.Elab.Tactic.TacticM">TacticM</a> (<span class="fn"><a href="../../.././Init/Prelude.html#List">List</a> (<span class="fn"><span class="fn">Mathlib.Tactic.SplitPosition</span> <a href="../../.././Init/Prelude.html#Prod">Ã—</a> <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a></span>)</span>)</span></span></span></span></div></blockquote></div></small></div><span class="nv">getSplitCandidates</span></span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>(â† getSplitCandidates loc)</var><b>: </b><span><span class="fn">?m.5577</span></span></span></div></blockquote></div></small></div><span class="nv"> </span></span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>loc</var><b>: </b><span><a href="../../.././Lean/Elab/Tactic/Location.html#Lean.Elab.Tactic.Location">Location</a></span></span></div></blockquote></div></small></div><span class="nv">loc</span></span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>(â† getSplitCandidates loc)</var><b>: </b><span><span class="fn">?m.5577</span></span></span></div></blockquote></div></small></div><span class="nv">)</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><span class="k">do</span></span><span class="alectryon-token">
    </span><span class="alectryon-token"><span class="k">if</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><span class="k">let</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>some</var><b>: </b><span><span class="fn">{<span class="fn">Î±</span> : <span class="fn">Type ?u.5538</span>} â†’ <span class="fn"><span class="fn">Î±</span> â†’ <span class="fn"><a href="../../.././Init/Prelude.html#Option">Option</a> <span class="fn">Î±</span></span></span></span></span></span></div></blockquote></div></small></div>some</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>cond</var><b>: </b><span><a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a></span></span></div></blockquote></div></small></div><span class="nv">cond</span></span><span class="alectryon-token"> := </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>SplitIf.findIfToSplit?</var><b>: </b><span><span class="fn"><a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a> â†’ <span class="fn"><a href="../../.././Init/Prelude.html#Option">Option</a> <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a></span></span></span></span></div></blockquote></div></small></div>SplitIf.findIfToSplit?</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>e</var><b>: </b><span><a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a></span></span></div></blockquote></div></small></div><span class="nv">e</span></span><span class="alectryon-token">
    </span><span class="alectryon-token"><span class="k">then</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><span class="k">return</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>some</var><b>: </b><span><span class="fn">{<span class="fn">Î±</span> : <span class="fn">Type ?u.5730</span>} â†’ <span class="fn"><span class="fn">Î±</span> â†’ <span class="fn"><a href="../../.././Init/Prelude.html#Option">Option</a> <span class="fn">Î±</span></span></span></span></span></span></div></blockquote></div></small></div>some</span><span class="alectryon-token"> (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>pos</var><b>: </b><span><span class="fn">Mathlib.Tactic.SplitPosition</span></span></span></div></blockquote></div></small></div><span class="nv">pos</span></span><span class="alectryon-token">, </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>cond</var><b>: </b><span><a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a></span></span></div></blockquote></div></small></div><span class="nv">cond</span></span><span class="alectryon-token">)
  </span><span class="alectryon-token"><span class="k">return</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>none</var><b>: </b><span><span class="fn">{<span class="fn">Î±</span> : <span class="fn">Type ?u.6253</span>} â†’ <span class="fn"><a href="../../.././Init/Prelude.html#Option">Option</a> <span class="fn">Î±</span></span></span></span></span></div></blockquote></div></small></div>none</span><span class="alectryon-token">

/-- `Simp.Discharge` strategy to use in `reduceIfsAt`. Delegates to
`SplitIf.discharge?`, and additionally supports discharging `True`, to
better match the behavior of mathlib3's `split_ifs`.
-/
</span><span class="alectryon-token"><span class="k">private</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><span class="k">def</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>discharge?</var><b>: </b><span><span class="fn"><a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a> â†’ <span class="fn"><a href="../../.././Lean/Meta/Tactic/Simp/Types.html#Lean.Meta.Simp.SimpM">SimpM</a> (<span class="fn"><a href="../../.././Init/Prelude.html#Option">Option</a> <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a></span>)</span></span></span></span></div></blockquote></div></small></div><span class="nv">discharge?</span></span><span class="alectryon-token"> (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>e</var><b>: </b><span><a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a></span></span></div></blockquote></div></small></div><span class="nv">e</span></span><span class="alectryon-token"> : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Expr</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div>Expr</span><span class="alectryon-token">) : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>SimpM</var><b>: </b><span><span class="fn"><span class="fn">Type</span> â†’ <span class="fn">Type</span></span></span></span></div></blockquote></div></small></div>SimpM</span><span class="alectryon-token"> (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Option</var><b>: </b><span><span class="fn"><span class="fn">Type ?u.8911</span> â†’ <span class="fn">Type ?u.8911</span></span></span></span></div></blockquote></div></small></div>Option</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Expr</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div>Expr</span><span class="alectryon-token">) := </span><span class="alectryon-token"><span class="k">do</span></span><span class="alectryon-token">
  </span><span class="alectryon-token"><span class="k">let</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>e</var><b>: </b><span><span class="fn">?m.9024</span></span></span></div></blockquote></div></small></div><span class="nv">e</span></span><span class="alectryon-token"> â† </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>instantiateMVars</var><b>: </b><span><span class="fn">{<span class="fn">m</span> : <span class="fn"><span class="fn">Type</span> â†’ <span class="fn">Type</span></span>} â†’ <span class="fn">[<span class="fn">inst</span> : <span class="fn"><a href="../../.././Init/Prelude.html#Monad">Monad</a> <span class="fn">m</span></span>] â†’ <span class="fn">[<span class="fn">inst</span> : <span class="fn"><a href="../../.././Lean/MetavarContext.html#Lean.MonadMCtx">MonadMCtx</a> <span class="fn">m</span></span>] â†’ <span class="fn"><a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a> â†’ <span class="fn"><span class="fn">m</span> <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a></span></span></span></span></span></span></span></div></blockquote></div></small></div>instantiateMVars</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>e</var><b>: </b><span><a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a></span></span></div></blockquote></div></small></div><span class="nv">e</span></span><span class="alectryon-token">
  </span><span class="alectryon-token"><span class="k">if</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><span class="k">let</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>some</var><b>: </b><span><span class="fn">{<span class="fn">Î±</span> : <span class="fn">Type ?u.9061</span>} â†’ <span class="fn"><span class="fn">Î±</span> â†’ <span class="fn"><a href="../../.././Init/Prelude.html#Option">Option</a> <span class="fn">Î±</span></span></span></span></span></span></div></blockquote></div></small></div>some</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>e1</var><b>: </b><span><a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a></span></span></div></blockquote></div></small></div><span class="nv">e1</span></span><span class="alectryon-token"> â† </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>SplitIf.discharge?</var><b>: </b><span><span class="fn"><span class="fn"><a href="../../.././Init/Prelude.html#optParam">optParam</a> <a href="../../.././Init/Prelude.html#Bool">Bool</a> <a href="../../.././Init/Prelude.html#Bool.false">false</a></span> â†’ <a href="../../.././Lean/Meta/Tactic/Simp/Main.html#Lean.Meta.Simp.Discharge">Simp.Discharge</a></span></span></span></div></blockquote></div></small></div>SplitIf.discharge?</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>false</var><b>: </b><span><a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></div></blockquote></div></small></div>false</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>e</var><b>: </b><span><span class="fn">?m.9024</span></span></span></div></blockquote></div></small></div><span class="nv">e</span></span><span class="alectryon-token">
    </span><span class="alectryon-token"><span class="k">then</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><span class="k">return</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>some</var><b>: </b><span><span class="fn">{<span class="fn">Î±</span> : <span class="fn">Type ?u.9082</span>} â†’ <span class="fn"><span class="fn">Î±</span> â†’ <span class="fn"><a href="../../.././Init/Prelude.html#Option">Option</a> <span class="fn">Î±</span></span></span></span></span></span></div></blockquote></div></small></div>some</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>e1</var><b>: </b><span><a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a></span></span></div></blockquote></div></small></div><span class="nv">e1</span></span><span class="alectryon-token">
  </span><span class="alectryon-token"><span class="k">if</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>e</var><b>: </b><span><span class="fn">?m.9024</span></span></span></div></blockquote></div></small></div><span class="nv">e</span></span><span class="alectryon-token">.</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>isConstOf</var><b>: </b><span><span class="fn"><a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a> â†’ <span class="fn"><a href="../../.././Init/Prelude.html#Lean.Name">Name</a> â†’ <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span></div></blockquote></div></small></div>isConstOf</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>`True</var><b>: </b><span><a href="../../.././Init/Prelude.html#Lean.Name">Name</a></span></span></div></blockquote></div></small></div>`True</span><span class="alectryon-token">
    </span><span class="alectryon-token"><span class="k">then</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><span class="k">return</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>some</var><b>: </b><span><span class="fn">{<span class="fn">Î±</span> : <span class="fn">Type ?u.9319</span>} â†’ <span class="fn"><span class="fn">Î±</span> â†’ <span class="fn"><a href="../../.././Init/Prelude.html#Option">Option</a> <span class="fn">Î±</span></span></span></span></span></span></div></blockquote></div></small></div>some</span><span class="alectryon-token"> (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>mkConst</var><b>: </b><span><span class="fn"><a href="../../.././Init/Prelude.html#Lean.Name">Name</a> â†’ <span class="fn"><span class="fn"><a href="../../.././Init/Prelude.html#optParam">optParam</a> (<span class="fn"><a href="../../.././Init/Prelude.html#List">List</a> <a href="../../.././Lean/Level.html#Lean.Level">Level</a></span>) <span class="fn">[]</span></span> â†’ <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a></span></span></span></span></div></blockquote></div></small></div>mkConst</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>`True.intro</var><b>: </b><span><a href="../../.././Init/Prelude.html#Lean.Name">Name</a></span></span></div></blockquote></div></small></div>`True.intro</span><span class="alectryon-token">)
  </span><span class="alectryon-token"><span class="k">return</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>none</var><b>: </b><span><span class="fn">{<span class="fn">Î±</span> : <span class="fn">Type ?u.9393</span>} â†’ <span class="fn"><a href="../../.././Init/Prelude.html#Option">Option</a> <span class="fn">Î±</span></span></span></span></span></div></blockquote></div></small></div>none</span><span class="alectryon-token">

/-- Simplifies if-then-else expressions after cases have been split out.
-/
</span><span class="alectryon-token"><span class="k">private</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><span class="k">def</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>reduceIfsAt</var><b>: </b><span><span class="fn"><a href="../../.././Lean/Elab/Tactic/Location.html#Lean.Elab.Tactic.Location">Location</a> â†’ <span class="fn"><a href="../../.././Lean/Elab/Tactic/Basic.html#Lean.Elab.Tactic.TacticM">TacticM</a> <a href="../../.././Init/Prelude.html#Unit">Unit</a></span></span></span></span></div></blockquote></div></small></div><span class="nv">reduceIfsAt</span></span><span class="alectryon-token"> (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>loc</var><b>: </b><span><a href="../../.././Lean/Elab/Tactic/Location.html#Lean.Elab.Tactic.Location">Location</a></span></span></div></blockquote></div></small></div><span class="nv">loc</span></span><span class="alectryon-token"> : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Location</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div>Location</span><span class="alectryon-token">) : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>TacticM</var><b>: </b><span><span class="fn"><span class="fn">Type</span> â†’ <span class="fn">Type</span></span></span></span></div></blockquote></div></small></div>TacticM</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Unit</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div>Unit</span><span class="alectryon-token"> := </span><span class="alectryon-token"><span class="k">do</span></span><span class="alectryon-token">
  </span><span class="alectryon-token"><span class="k">let</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ctx</var><b>: </b><span><span class="fn">?m.11037</span></span></span></div></blockquote></div></small></div><span class="nv">ctx</span></span><span class="alectryon-token"> â† </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>SplitIf.getSimpContext</var><b>: </b><span><span class="fn"><a href="../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">MetaM</a> <a href="../../.././Lean/Meta/Tactic/Simp/Types.html#Lean.Meta.Simp.Context">Simp.Context</a></span></span></span></div></blockquote></div></small></div>SplitIf.getSimpContext</span><span class="alectryon-token">
  </span><span class="alectryon-token"><span class="k">let</span></span><span class="alectryon-token"> _ â† </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>simpLocation</var><b>: </b><span><span class="fn"><a href="../../.././Lean/Meta/Tactic/Simp/Types.html#Lean.Meta.Simp.Context">Simp.Context</a> â†’ <span class="fn"><span class="fn"><a href="../../.././Init/Prelude.html#optParam">optParam</a> (<span class="fn"><a href="../../.././Init/Prelude.html#Option">Option</a> <a href="../../.././Lean/Meta/Tactic/Simp/Main.html#Lean.Meta.Simp.Discharge">Simp.Discharge</a></span>) <span class="fn">none</span></span> â†’ <span class="fn"><a href="../../.././Lean/Elab/Tactic/Location.html#Lean.Elab.Tactic.Location">Location</a> â†’ <span class="fn"><a href="../../.././Lean/Elab/Tactic/Basic.html#Lean.Elab.Tactic.TacticM">TacticM</a> <a href="../../.././Lean/Meta/Tactic/Simp/Types.html#Lean.Meta.Simp.UsedSimps">Simp.UsedSimps</a></span></span></span></span></span></span></div></blockquote></div></small></div>simpLocation</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ctx</var><b>: </b><span><span class="fn">?m.11037</span></span></span></div></blockquote></div></small></div><span class="nv">ctx</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>discharge?</var><b>: </b><span><span class="fn"><a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a> â†’ <span class="fn"><a href="../../.././Lean/Meta/Tactic/Simp/Types.html#Lean.Meta.Simp.SimpM">SimpM</a> (<span class="fn"><a href="../../.././Init/Prelude.html#Option">Option</a> <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a></span>)</span></span></span></span></div></blockquote></div></small></div>discharge?</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>loc</var><b>: </b><span><a href="../../.././Lean/Elab/Tactic/Location.html#Lean.Elab.Tactic.Location">Location</a></span></span></div></blockquote></div></small></div><span class="nv">loc</span></span><span class="alectryon-token">
  </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>pure</var><b>: </b><span><span class="fn">{<span class="fn">f</span> : <span class="fn"><span class="fn">Type ?u.11176</span> â†’ <span class="fn">Type ?u.11175</span></span>} â†’ <span class="fn">[<span class="fn">self</span> : <span class="fn"><a href="../../.././Init/Prelude.html#Pure">Pure</a> <span class="fn">f</span></span>] â†’ <span class="fn">{<span class="fn">Î±</span> : <span class="fn">Type ?u.11176</span>} â†’ <span class="fn"><span class="fn">Î±</span> â†’ <span class="fn"><span class="fn">f</span> <span class="fn">Î±</span></span></span></span></span></span></span></span></div></blockquote></div></small></div>pure</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>()</var><b>: </b><span><a href="../../.././Init/Prelude.html#Unit">Unit</a></span></span></div></blockquote></div></small></div>()</span><span class="alectryon-token">

/-- Splits a single if-then-else expression and then reduces the resulting goals.
Has a similar effect as `SplitIf.splitIfTarget?` or `SplitIf.splitIfLocalDecl?` from
core Lean 4. We opt not to use those library functions so that we can better mimic
the behavior of mathlib3's `split_ifs`.
-/
</span><span class="alectryon-token"><span class="k">private</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><span class="k">def</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>splitIf1</var><b>: </b><span><span class="fn"><a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a> â†’ <span class="fn"><a href="../../.././Init/Prelude.html#Lean.Name">Name</a> â†’ <span class="fn"><a href="../../.././Lean/Elab/Tactic/Location.html#Lean.Elab.Tactic.Location">Location</a> â†’ <span class="fn"><a href="../../.././Lean/Elab/Tactic/Basic.html#Lean.Elab.Tactic.TacticM">TacticM</a> <a href="../../.././Init/Prelude.html#Unit">Unit</a></span></span></span></span></span></span></div></blockquote></div></small></div><span class="nv">splitIf1</span></span><span class="alectryon-token"> (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>cond</var><b>: </b><span><a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a></span></span></div></blockquote></div></small></div><span class="nv">cond</span></span><span class="alectryon-token">: </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Expr</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div>Expr</span><span class="alectryon-token">) (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>hName</var><b>: </b><span><a href="../../.././Init/Prelude.html#Lean.Name">Name</a></span></span></div></blockquote></div></small></div><span class="nv">hName</span></span><span class="alectryon-token"> : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Name</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div>Name</span><span class="alectryon-token">) (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>loc</var><b>: </b><span><a href="../../.././Lean/Elab/Tactic/Location.html#Lean.Elab.Tactic.Location">Location</a></span></span></div></blockquote></div></small></div><span class="nv">loc</span></span><span class="alectryon-token"> : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Location</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div>Location</span><span class="alectryon-token">) : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>TacticM</var><b>: </b><span><span class="fn"><span class="fn">Type</span> â†’ <span class="fn">Type</span></span></span></span></div></blockquote></div></small></div>TacticM</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Unit</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div>Unit</span><span class="alectryon-token"> := </span><span class="alectryon-token"><span class="k">do</span></span><span class="alectryon-token">
  </span><span class="alectryon-token"><span class="k">let</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>splitCases</var><b>: </b><span><span class="fn">?m.12035</span></span></span></div></blockquote></div></small></div><span class="nv">splitCases</span></span><span class="alectryon-token"> := </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>liftMetaTactic</var><b>: </b><span><span class="fn">(<span class="fn"><a href="../../.././Lean/Expr.html#Lean.MVarId">MVarId</a> â†’ <span class="fn"><a href="../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">MetaM</a> (<span class="fn"><a href="../../.././Init/Prelude.html#List">List</a> <a href="../../.././Lean/Expr.html#Lean.MVarId">MVarId</a></span>)</span></span>) â†’ <span class="fn"><a href="../../.././Lean/Elab/Tactic/Basic.html#Lean.Elab.Tactic.TacticM">TacticM</a> <a href="../../.././Init/Prelude.html#Unit">Unit</a></span></span></span></span></div></blockquote></div></small></div>liftMetaTactic</span><span class="alectryon-token"> </span><span class="alectryon-token"><span class="k">fun</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>mvarId</var><b>: </b><span><span class="fn">?m.12046</span></span></span></div></blockquote></div></small></div><span class="nv">mvarId</span></span><span class="alectryon-token"> => </span><span class="alectryon-token"><span class="k">do</span></span><span class="alectryon-token">
    </span><span class="alectryon-token"><span class="k">let</span></span><span class="alectryon-token"> (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s1</var><b>: </b><span><a href="../../.././Lean/Meta/Tactic/Cases.html#Lean.Meta.ByCasesSubgoal">ByCasesSubgoal</a></span></span></div></blockquote></div></small></div><span class="nv">s1</span></span><span class="alectryon-token">, </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s2</var><b>: </b><span><a href="../../.././Lean/Meta/Tactic/Cases.html#Lean.Meta.ByCasesSubgoal">ByCasesSubgoal</a></span></span></div></blockquote></div></small></div><span class="nv">s2</span></span><span class="alectryon-token">) â† </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>mvarId</var><b>: </b><span><span class="fn">?m.12046</span></span></span></div></blockquote></div></small></div><span class="nv">mvarId</span></span><span class="alectryon-token">.</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>byCases</var><b>: </b><span><span class="fn"><a href="../../.././Lean/Expr.html#Lean.MVarId">MVarId</a> â†’ <span class="fn"><a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a> â†’ <span class="fn"><span class="fn"><a href="../../.././Init/Prelude.html#optParam">optParam</a> <a href="../../.././Init/Prelude.html#Lean.Name">Name</a> <span class="fn">`h</span></span> â†’ <span class="fn"><a href="../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">MetaM</a> (<span class="fn"><a href="../../.././Lean/Meta/Tactic/Cases.html#Lean.Meta.ByCasesSubgoal">ByCasesSubgoal</a> <a href="../../.././Init/Prelude.html#Prod">Ã—</a> <a href="../../.././Lean/Meta/Tactic/Cases.html#Lean.Meta.ByCasesSubgoal">ByCasesSubgoal</a></span>)</span></span></span></span></span></span></div></blockquote></div></small></div>byCases</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>cond</var><b>: </b><span><a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a></span></span></div></blockquote></div></small></div><span class="nv">cond</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>hName</var><b>: </b><span><a href="../../.././Init/Prelude.html#Lean.Name">Name</a></span></span></div></blockquote></div></small></div><span class="nv">hName</span></span><span class="alectryon-token">
    </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>pure</var><b>: </b><span><span class="fn">{<span class="fn">f</span> : <span class="fn"><span class="fn">Type ?u.12125</span> â†’ <span class="fn">Type ?u.12124</span></span>} â†’ <span class="fn">[<span class="fn">self</span> : <span class="fn"><a href="../../.././Init/Prelude.html#Pure">Pure</a> <span class="fn">f</span></span>] â†’ <span class="fn">{<span class="fn">Î±</span> : <span class="fn">Type ?u.12125</span>} â†’ <span class="fn"><span class="fn">Î±</span> â†’ <span class="fn"><span class="fn">f</span> <span class="fn">Î±</span></span></span></span></span></span></span></span></div></blockquote></div></small></div>pure</span><span class="alectryon-token"> [</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s1</var><b>: </b><span><a href="../../.././Lean/Meta/Tactic/Cases.html#Lean.Meta.ByCasesSubgoal">ByCasesSubgoal</a></span></span></div></blockquote></div></small></div><span class="nv">s1</span></span><span class="alectryon-token">.</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>mvarId</var><b>: </b><span><span class="fn"><a href="../../.././Lean/Meta/Tactic/Cases.html#Lean.Meta.ByCasesSubgoal">ByCasesSubgoal</a> â†’ <a href="../../.././Lean/Expr.html#Lean.MVarId">MVarId</a></span></span></span></div></blockquote></div></small></div>mvarId</span><span class="alectryon-token">, </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s2</var><b>: </b><span><a href="../../.././Lean/Meta/Tactic/Cases.html#Lean.Meta.ByCasesSubgoal">ByCasesSubgoal</a></span></span></div></blockquote></div></small></div><span class="nv">s2</span></span><span class="alectryon-token">.</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>mvarId</var><b>: </b><span><span class="fn"><a href="../../.././Lean/Meta/Tactic/Cases.html#Lean.Meta.ByCasesSubgoal">ByCasesSubgoal</a> â†’ <a href="../../.././Lean/Expr.html#Lean.MVarId">MVarId</a></span></span></span></div></blockquote></div></small></div>mvarId</span><span class="alectryon-token">]
  </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>tac_and_then</var><b>: </b><span><span class="fn"><span class="fn"><a href="../../.././Lean/Elab/Tactic/Basic.html#Lean.Elab.Tactic.TacticM">TacticM</a> <a href="../../.././Init/Prelude.html#Unit">Unit</a></span> â†’ <span class="fn"><a href="../../.././Lean/Elab/Tactic/Basic.html#Lean.Elab.Tactic.TacticM">TacticM</a> <a href="../../.././Init/Prelude.html#Unit">Unit</a></span> â†’ <span class="fn"><a href="../../.././Lean/Elab/Tactic/Basic.html#Lean.Elab.Tactic.TacticM">TacticM</a> <a href="../../.././Init/Prelude.html#Unit">Unit</a></span></span></span></span></div></blockquote></div></small></div>tac_and_then</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>splitCases</var><b>: </b><span><span class="fn">?m.12035</span></span></span></div></blockquote></div></small></div><span class="nv">splitCases</span></span><span class="alectryon-token"> (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>reduceIfsAt</var><b>: </b><span><span class="fn"><a href="../../.././Lean/Elab/Tactic/Location.html#Lean.Elab.Tactic.Location">Location</a> â†’ <span class="fn"><a href="../../.././Lean/Elab/Tactic/Basic.html#Lean.Elab.Tactic.TacticM">TacticM</a> <a href="../../.././Init/Prelude.html#Unit">Unit</a></span></span></span></span></div></blockquote></div></small></div>reduceIfsAt</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>loc</var><b>: </b><span><a href="../../.././Lean/Elab/Tactic/Location.html#Lean.Elab.Tactic.Location">Location</a></span></span></div></blockquote></div></small></div><span class="nv">loc</span></span><span class="alectryon-token">)

/-- Pops off the front of the list of names, or generates a fresh name if the
list is empty.
-/
</span><span class="alectryon-token"><span class="k">private</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><span class="k">def</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>getNextName</var><b>: </b><span><span class="fn"><span class="fn"><a href="../../.././Init/System/IO.html#IO.Ref">IO.Ref</a> (<span class="fn"><a href="../../.././Init/Prelude.html#List">List</a> <a href="../../.././Init/Prelude.html#Lean.Name">Name</a></span>)</span> â†’ <span class="fn"><a href="../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">MetaM</a> <a href="../../.././Init/Prelude.html#Lean.Name">Name</a></span></span></span></span></div></blockquote></div></small></div><span class="nv">getNextName</span></span><span class="alectryon-token"> (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>hNames</var><b>: </b><span><span class="fn"><a href="../../.././Init/System/IO.html#IO.Ref">IO.Ref</a> (<span class="fn"><a href="../../.././Init/Prelude.html#List">List</a> <a href="../../.././Init/Prelude.html#Lean.Name">Name</a></span>)</span></span></span></div></blockquote></div></small></div><span class="nv">hNames</span></span><span class="alectryon-token">: </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>IO.Ref</var><b>: </b><span><span class="fn"><span class="fn">Type</span> â†’ <span class="fn">Type</span></span></span></span></div></blockquote></div></small></div>IO.Ref</span><span class="alectryon-token"> (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>List</var><b>: </b><span><span class="fn"><span class="fn">Type ?u.13291</span> â†’ <span class="fn">Type ?u.13291</span></span></span></span></div></blockquote></div></small></div>List</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Name</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div>Name</span><span class="alectryon-token">)) : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>MetaM</var><b>: </b><span><span class="fn"><span class="fn">Type</span> â†’ <span class="fn">Type</span></span></span></span></div></blockquote></div></small></div>MetaM</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Name</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div>Name</span><span class="alectryon-token"> := </span><span class="alectryon-token"><span class="k">do</span></span><span class="alectryon-token">
  </span><span class="alectryon-token"><span class="k">match</span></span><span class="alectryon-token"> â†</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>hNames</var><b>: </b><span><span class="fn"><a href="../../.././Init/System/IO.html#IO.Ref">IO.Ref</a> (<span class="fn"><a href="../../.././Init/Prelude.html#List">List</a> <a href="../../.././Init/Prelude.html#Lean.Name">Name</a></span>)</span></span></span></div></blockquote></div></small></div><span class="nv">hNames</span></span><span class="alectryon-token">.</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>get</var><b>: </b><span><span class="fn">{<span class="fn">Ïƒ</span> : <span class="fn">Type</span>} â†’ <span class="fn">{<span class="fn">m</span> : <span class="fn"><span class="fn">Type</span> â†’ <span class="fn">Type</span></span>} â†’ <span class="fn">[<span class="fn">inst</span> : <span class="fn"><a href="../../.././Init/Prelude.html#MonadLiftT">MonadLiftT</a> (<span class="fn"><a href="../../.././Init/System/ST.html#ST">ST</a> <span class="fn">Ïƒ</span></span>) <span class="fn">m</span></span>] â†’ <span class="fn">{<span class="fn">Î±</span> : <span class="fn">Type</span>} â†’ <span class="fn"><span class="fn"><a href="../../.././Init/System/ST.html#ST.Ref">ST.Ref</a> <span class="fn">Ïƒ</span> <span class="fn">Î±</span></span> â†’ <span class="fn"><span class="fn">m</span> <span class="fn">Î±</span></span></span></span></span></span></span></span></span></div></blockquote></div></small></div>get</span><span class="alectryon-token"> </span><span class="alectryon-token"><span class="k">with</span></span><span class="alectryon-token">
  | [] => </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>mkFreshUserName</var><b>: </b><span><span class="fn"><a href="../../.././Init/Prelude.html#Lean.Name">Name</a> â†’ <span class="fn"><a href="../../.././Lean/CoreM.html#Lean.Core.CoreM">CoreM</a> <a href="../../.././Init/Prelude.html#Lean.Name">Name</a></span></span></span></span></div></blockquote></div></small></div>mkFreshUserName</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>`h</var><b>: </b><span><a href="../../.././Init/Prelude.html#Lean.Name">Name</a></span></span></div></blockquote></div></small></div>`h</span><span class="alectryon-token">
  | </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>n</var><b>: </b><span><a href="../../.././Init/Prelude.html#Lean.Name">Name</a></span></span></div></blockquote></div></small></div><span class="nv">n</span></span><span class="alectryon-token">::</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ns</var><b>: </b><span><span class="fn"><a href="../../.././Init/Prelude.html#List">List</a> <a href="../../.././Init/Prelude.html#Lean.Name">Name</a></span></span></span></div></blockquote></div></small></div><span class="nv">ns</span></span><span class="alectryon-token"> => </span><span class="alectryon-token"><span class="k">do</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>hNames</var><b>: </b><span><span class="fn"><a href="../../.././Init/System/IO.html#IO.Ref">IO.Ref</a> (<span class="fn"><a href="../../.././Init/Prelude.html#List">List</a> <a href="../../.././Init/Prelude.html#Lean.Name">Name</a></span>)</span></span></span></div></blockquote></div></small></div><span class="nv">hNames</span></span><span class="alectryon-token">.</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>set</var><b>: </b><span><span class="fn">{<span class="fn">Ïƒ</span> : <span class="fn">Type</span>} â†’ <span class="fn">{<span class="fn">m</span> : <span class="fn"><span class="fn">Type</span> â†’ <span class="fn">Type</span></span>} â†’ <span class="fn">[<span class="fn">inst</span> : <span class="fn"><a href="../../.././Init/Prelude.html#MonadLiftT">MonadLiftT</a> (<span class="fn"><a href="../../.././Init/System/ST.html#ST">ST</a> <span class="fn">Ïƒ</span></span>) <span class="fn">m</span></span>] â†’ <span class="fn">{<span class="fn">Î±</span> : <span class="fn">Type</span>} â†’ <span class="fn"><span class="fn"><a href="../../.././Init/System/ST.html#ST.Ref">ST.Ref</a> <span class="fn">Ïƒ</span> <span class="fn">Î±</span></span> â†’ <span class="fn"><span class="fn">Î±</span> â†’ <span class="fn"><span class="fn">m</span> <a href="../../.././Init/Prelude.html#Unit">Unit</a></span></span></span></span></span></span></span></span></span></div></blockquote></div></small></div>set</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ns</var><b>: </b><span><span class="fn"><a href="../../.././Init/Prelude.html#List">List</a> <a href="../../.././Init/Prelude.html#Lean.Name">Name</a></span></span></span></div></blockquote></div></small></div><span class="nv">ns</span></span><span class="alectryon-token">; </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>pure</var><b>: </b><span><span class="fn">{<span class="fn">f</span> : <span class="fn"><span class="fn">Type ?u.13698</span> â†’ <span class="fn">Type ?u.13697</span></span>} â†’ <span class="fn">[<span class="fn">self</span> : <span class="fn"><a href="../../.././Init/Prelude.html#Pure">Pure</a> <span class="fn">f</span></span>] â†’ <span class="fn">{<span class="fn">Î±</span> : <span class="fn">Type ?u.13698</span>} â†’ <span class="fn"><span class="fn">Î±</span> â†’ <span class="fn"><span class="fn">f</span> <span class="fn">Î±</span></span></span></span></span></span></span></span></div></blockquote></div></small></div>pure</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>n</var><b>: </b><span><a href="../../.././Init/Prelude.html#Lean.Name">Name</a></span></span></div></blockquote></div></small></div><span class="nv">n</span></span><span class="alectryon-token">

/-- Returns `true` if the condition or its negation already appears as a hypothesis.
-/
</span><span class="alectryon-token"><span class="k">private</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><span class="k">def</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>valueKnown</var><b>: </b><span><span class="fn"><a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a> â†’ <span class="fn"><a href="../../.././Lean/Elab/Tactic/Basic.html#Lean.Elab.Tactic.TacticM">TacticM</a> <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span></div></blockquote></div></small></div><span class="nv">valueKnown</span></span><span class="alectryon-token"> (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>cond</var><b>: </b><span><a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a></span></span></div></blockquote></div></small></div><span class="nv">cond</span></span><span class="alectryon-token"> : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Expr</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div>Expr</span><span class="alectryon-token">) : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>TacticM</var><b>: </b><span><span class="fn"><span class="fn">Type</span> â†’ <span class="fn">Type</span></span></span></span></div></blockquote></div></small></div>TacticM</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Bool</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div>Bool</span><span class="alectryon-token"> := </span><span class="alectryon-token"><span class="k">do</span></span><span class="alectryon-token">
  </span><span class="alectryon-token"><span class="k">let</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>hTypes</var><b>: </b><span><span class="fn">?m.15055</span></span></span></div></blockquote></div></small></div><span class="nv">hTypes</span></span><span class="alectryon-token"> â† ((</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>(â† getLCtx)</var><b>: </b><span><span class="fn">?m.14846</span></span></span></div></blockquote></div></small></div><span class="nv">(â† </span></span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>getLCtx</var><b>: </b><span><span class="fn">{<span class="fn">m</span> : <span class="fn"><span class="fn">Type</span> â†’ <span class="fn">Type</span></span>} â†’ <span class="fn">[<span class="fn">self</span> : <span class="fn"><a href="../../.././Lean/LocalContext.html#Lean.MonadLCtx">MonadLCtx</a> <span class="fn">m</span></span>] â†’ <span class="fn"><span class="fn">m</span> <a href="../../.././Lean/LocalContext.html#Lean.LocalContext">LocalContext</a></span></span></span></span></span></div></blockquote></div></small></div><span class="nv">getLCtx</span></span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>(â† getLCtx)</var><b>: </b><span><span class="fn">?m.14846</span></span></span></div></blockquote></div></small></div><span class="nv">)</span></span><span class="alectryon-token">.</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>getFVarIds</var><b>: </b><span><span class="fn"><a href="../../.././Lean/LocalContext.html#Lean.LocalContext">LocalContext</a> â†’ <span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <a href="../../.././Lean/Expr.html#Lean.FVarId">FVarId</a></span></span></span></span></div></blockquote></div></small></div><span class="na">getFVarIds</span></span><span class="alectryon-token"><span class="na">.</span></span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>map</var><b>: </b><span><span class="fn">{<span class="fn">Î±</span> : <span class="fn">Type ?u.14860</span>} â†’ <span class="fn">{<span class="fn">Î²</span> : <span class="fn">Type ?u.14859</span>} â†’ <span class="fn">(<span class="fn"><span class="fn">Î±</span> â†’ <span class="fn">Î²</span></span>) â†’ <span class="fn"><span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <span class="fn">Î±</span></span> â†’ <span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <span class="fn">Î²</span></span></span></span></span></span></span></span></div></blockquote></div></small></div><span class="na">map</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>mkFVar</var><b>: </b><span><span class="fn"><a href="../../.././Lean/Expr.html#Lean.FVarId">FVarId</a> â†’ <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a></span></span></span></div></blockquote></div></small></div>mkFVar</span><span class="alectryon-token">).</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>mapM</var><b>: </b><span><span class="fn">{<span class="fn">Î±</span> : <span class="fn">Type ?u.14873</span>} â†’
  <span class="fn">{<span class="fn">Î²</span> : <span class="fn">Type ?u.14872</span>} â†’ <span class="fn">{<span class="fn">m</span> : <span class="fn"><span class="fn">Type ?u.14872</span> â†’ <span class="fn">Type ?u.14871</span></span>} â†’ <span class="fn">[<span class="fn">inst</span> : <span class="fn"><a href="../../.././Init/Prelude.html#Monad">Monad</a> <span class="fn">m</span></span>] â†’ <span class="fn">(<span class="fn"><span class="fn">Î±</span> â†’ <span class="fn"><span class="fn">m</span> <span class="fn">Î²</span></span></span>) â†’ <span class="fn"><span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <span class="fn">Î±</span></span> â†’ <span class="fn"><span class="fn">m</span> (<span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <span class="fn">Î²</span></span>)</span></span></span></span></span></span></span></span></span></div></blockquote></div></small></div><span class="na">mapM</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>inferType</var><b>: </b><span><span class="fn"><a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a> â†’ <span class="fn"><a href="../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">MetaM</a> <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a></span></span></span></span></div></blockquote></div></small></div>inferType</span><span class="alectryon-token"> : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>MetaM</var><b>: </b><span><span class="fn"><span class="fn">Type</span> â†’ <span class="fn">Type</span></span></span></span></div></blockquote></div></small></div>MetaM</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>_</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div>_</span><span class="alectryon-token">)
  </span><span class="alectryon-token"><span class="k">let</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>hTypes</var><b>: </b><span><span class="fn">?m.15058</span></span></span></div></blockquote></div></small></div><span class="nv">hTypes</span></span><span class="alectryon-token"> := </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>hTypes</var><b>: </b><span><span class="fn">?m.15055</span></span></span></div></blockquote></div></small></div><span class="nv">hTypes</span></span><span class="alectryon-token">.</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>toList</var><b>: </b><span><span class="fn">{<span class="fn">Î±</span> : <span class="fn">Type ?u.15059</span>} â†’ <span class="fn"><span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <span class="fn">Î±</span></span> â†’ <span class="fn"><a href="../../.././Init/Prelude.html#List">List</a> <span class="fn">Î±</span></span></span></span></span></span></div></blockquote></div></small></div>toList</span><span class="alectryon-token">
  </span><span class="alectryon-token"><span class="k">let</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>not_cond</var><b>: </b><span><span class="fn">?m.15066</span></span></span></div></blockquote></div></small></div><span class="nv">not_cond</span></span><span class="alectryon-token"> := </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>mkApp</var><b>: </b><span><span class="fn"><a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a> â†’ <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a> â†’ <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a></span></span></span></div></blockquote></div></small></div>mkApp</span><span class="alectryon-token"> (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>mkConst</var><b>: </b><span><span class="fn"><a href="../../.././Init/Prelude.html#Lean.Name">Name</a> â†’ <span class="fn"><span class="fn"><a href="../../.././Init/Prelude.html#optParam">optParam</a> (<span class="fn"><a href="../../.././Init/Prelude.html#List">List</a> <a href="../../.././Lean/Level.html#Lean.Level">Level</a></span>) <span class="fn">[]</span></span> â†’ <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a></span></span></span></span></div></blockquote></div></small></div>mkConst</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>`Not</var><b>: </b><span><a href="../../.././Init/Prelude.html#Lean.Name">Name</a></span></span></div></blockquote></div></small></div>`Not</span><span class="alectryon-token">) </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>cond</var><b>: </b><span><a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a></span></span></div></blockquote></div></small></div><span class="nv">cond</span></span><span class="alectryon-token">
  </span><span class="alectryon-token"><span class="k">return</span></span><span class="alectryon-token"> (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>hTypes</var><b>: </b><span><span class="fn">?m.15058</span></span></span></div></blockquote></div></small></div><span class="nv">hTypes</span></span><span class="alectryon-token">.</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>contains</var><b>: </b><span><span class="fn">{<span class="fn">Î±</span> : <span class="fn">Type ?u.15074</span>} â†’ <span class="fn">[<span class="fn">inst</span> : <span class="fn"><a href="../../.././Init/Prelude.html#BEq">BEq</a> <span class="fn">Î±</span></span>] â†’ <span class="fn"><span class="fn"><a href="../../.././Init/Prelude.html#List">List</a> <span class="fn">Î±</span></span> â†’ <span class="fn"><span class="fn">Î±</span> â†’ <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span></span></span></div></blockquote></div></small></div>contains</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>cond</var><b>: </b><span><a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a></span></span></div></blockquote></div></small></div><span class="nv">cond</span></span><span class="alectryon-token">) || (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>hTypes</var><b>: </b><span><span class="fn">?m.15058</span></span></span></div></blockquote></div></small></div><span class="nv">hTypes</span></span><span class="alectryon-token">.</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>contains</var><b>: </b><span><span class="fn">{<span class="fn">Î±</span> : <span class="fn">Type ?u.15084</span>} â†’ <span class="fn">[<span class="fn">inst</span> : <span class="fn"><a href="../../.././Init/Prelude.html#BEq">BEq</a> <span class="fn">Î±</span></span>] â†’ <span class="fn"><span class="fn"><a href="../../.././Init/Prelude.html#List">List</a> <span class="fn">Î±</span></span> â†’ <span class="fn"><span class="fn">Î±</span> â†’ <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span></span></span></div></blockquote></div></small></div>contains</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>not_cond</var><b>: </b><span><span class="fn">?m.15066</span></span></span></div></blockquote></div></small></div><span class="nv">not_cond</span></span><span class="alectryon-token">)

/-- Main loop of split_ifs. Pulls names for new hypotheses from `hNames`.
Stops if it encounters a condition in the passed-in `List Expr`.
-/
</span><span class="alectryon-token"><span class="k">private</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><span class="k">partial</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><span class="k">def</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>splitIfsCore</var><b>: </b><span><span class="fn"><a href="../../.././Lean/Elab/Tactic/Location.html#Lean.Elab.Tactic.Location">Location</a> â†’ <span class="fn"><span class="fn"><a href="../../.././Init/System/IO.html#IO.Ref">IO.Ref</a> (<span class="fn"><a href="../../.././Init/Prelude.html#List">List</a> <a href="../../.././Init/Prelude.html#Lean.Name">Name</a></span>)</span> â†’ <span class="fn"><span class="fn"><a href="../../.././Init/Prelude.html#List">List</a> <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a></span> â†’ <span class="fn"><a href="../../.././Lean/Elab/Tactic/Basic.html#Lean.Elab.Tactic.TacticM">TacticM</a> <a href="../../.././Init/Prelude.html#Unit">Unit</a></span></span></span></span></span></span></div></blockquote></div></small></div><span class="nv">splitIfsCore</span></span><span class="alectryon-token"> (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>loc</var><b>: </b><span><a href="../../.././Lean/Elab/Tactic/Location.html#Lean.Elab.Tactic.Location">Location</a></span></span></div></blockquote></div></small></div><span class="nv">loc</span></span><span class="alectryon-token"> : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Location</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div>Location</span><span class="alectryon-token">) (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>hNames</var><b>: </b><span><span class="fn"><a href="../../.././Init/System/IO.html#IO.Ref">IO.Ref</a> (<span class="fn"><a href="../../.././Init/Prelude.html#List">List</a> <a href="../../.././Init/Prelude.html#Lean.Name">Name</a></span>)</span></span></span></div></blockquote></div></small></div><span class="nv">hNames</span></span><span class="alectryon-token"> : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>IO.Ref</var><b>: </b><span><span class="fn"><span class="fn">Type</span> â†’ <span class="fn">Type</span></span></span></span></div></blockquote></div></small></div>IO.Ref</span><span class="alectryon-token"> (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>List</var><b>: </b><span><span class="fn"><span class="fn">Type ?u.16409</span> â†’ <span class="fn">Type ?u.16409</span></span></span></span></div></blockquote></div></small></div>List</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Name</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div>Name</span><span class="alectryon-token">)) :
  </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>List</var><b>: </b><span><span class="fn"><span class="fn">Type ?u.16413</span> â†’ <span class="fn">Type ?u.16413</span></span></span></span></div></blockquote></div></small></div>List</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Expr</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div>Expr</span><span class="alectryon-token"> â†’ </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>TacticM</var><b>: </b><span><span class="fn"><span class="fn">Type</span> â†’ <span class="fn">Type</span></span></span></span></div></blockquote></div></small></div>TacticM</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Unit</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div>Unit</span><span class="alectryon-token"> := </span><span class="alectryon-token"><span class="k">fun</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>done</var><b>: </b><span><span class="fn">?m.16422</span></span></span></div></blockquote></div></small></div><span class="nv">done</span></span><span class="alectryon-token"> => </span><span class="alectryon-token"><span class="k">do</span></span><span class="alectryon-token">
  </span><span class="alectryon-token"><span class="k">let</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>some</var><b>: </b><span><span class="fn">{<span class="fn">Î±</span> : <span class="fn">Type ?u.16443</span>} â†’ <span class="fn"><span class="fn">Î±</span> â†’ <span class="fn"><a href="../../.././Init/Prelude.html#Option">Option</a> <span class="fn">Î±</span></span></span></span></span></span></div></blockquote></div></small></div>some</span><span class="alectryon-token"> (_,</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>cond</var><b>: </b><span><a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a></span></span></div></blockquote></div></small></div><span class="nv">cond</span></span><span class="alectryon-token">) â† </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>findIfCondAt</var><b>: </b><span><span class="fn"><a href="../../.././Lean/Elab/Tactic/Location.html#Lean.Elab.Tactic.Location">Location</a> â†’ <span class="fn"><a href="../../.././Lean/Elab/Tactic/Basic.html#Lean.Elab.Tactic.TacticM">TacticM</a> (<span class="fn"><a href="../../.././Init/Prelude.html#Option">Option</a> (<span class="fn"><span class="fn">Mathlib.Tactic.SplitPosition</span> <a href="../../.././Init/Prelude.html#Prod">Ã—</a> <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a></span>)</span>)</span></span></span></span></div></blockquote></div></small></div>findIfCondAt</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>loc</var><b>: </b><span><a href="../../.././Lean/Elab/Tactic/Location.html#Lean.Elab.Tactic.Location">Location</a></span></span></div></blockquote></div></small></div><span class="nv">loc</span></span><span class="alectryon-token">
      | </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Meta.throwTacticEx</var><b>: </b><span><span class="fn">{<span class="fn">Î±</span> : <span class="fn">Type</span>} â†’ <span class="fn"><a href="../../.././Init/Prelude.html#Lean.Name">Name</a> â†’ <span class="fn"><a href="../../.././Lean/Expr.html#Lean.MVarId">MVarId</a> â†’ <span class="fn"><a href="../../.././Lean/Message.html#Lean.MessageData">MessageData</a> â†’ <span class="fn"><a href="../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">MetaM</a> <span class="fn">Î±</span></span></span></span></span></span></span></span></div></blockquote></div></small></div>Meta.throwTacticEx</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>`split_ifs</var><b>: </b><span><a href="../../.././Init/Prelude.html#Lean.Name">Name</a></span></span></div></blockquote></div></small></div>`split_ifs</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>(â†getMainGoal)</var><b>: </b><span><span class="fn">?m.16473</span></span></span></div></blockquote></div></small></div><span class="nv">(â†</span></span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>getMainGoal</var><b>: </b><span><span class="fn"><a href="../../.././Lean/Elab/Tactic/Basic.html#Lean.Elab.Tactic.TacticM">TacticM</a> <a href="../../.././Lean/Expr.html#Lean.MVarId">MVarId</a></span></span></span></div></blockquote></div></small></div><span class="nv">getMainGoal</span></span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>(â†getMainGoal)</var><b>: </b><span><span class="fn">?m.16473</span></span></span></div></blockquote></div></small></div><span class="nv">)</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>"no if-the-else conditions to split"</var><b>: </b><span><a href="../../.././Init/Prelude.html#String">String</a></span></span></div></blockquote></div></small></div>"no if-the-else conditions to split"</span><span class="alectryon-token">

  -- If `cond` is `Â¬p` then use `p` instead.
  </span><span class="alectryon-token"><span class="k">let</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>cond</var><b>: </b><span><span class="fn">?m.16542</span></span></span></div></blockquote></div></small></div><span class="nv">cond</span></span><span class="alectryon-token"> := </span><span class="alectryon-token"><span class="k">if</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>cond</var><b>: </b><span><a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a></span></span></div></blockquote></div></small></div><span class="nv">cond</span></span><span class="alectryon-token">.</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>isAppOf</var><b>: </b><span><span class="fn"><a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a> â†’ <span class="fn"><a href="../../.././Init/Prelude.html#Lean.Name">Name</a> â†’ <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span></div></blockquote></div></small></div>isAppOf</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>`Not</var><b>: </b><span><a href="../../.././Init/Prelude.html#Lean.Name">Name</a></span></span></div></blockquote></div></small></div>`Not</span><span class="alectryon-token"> </span><span class="alectryon-token"><span class="k">then</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>cond</var><b>: </b><span><a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a></span></span></div></blockquote></div></small></div><span class="nv">cond</span></span><span class="alectryon-token">.</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>getAppArgs</var><b>: </b><span><span class="fn"><a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a> â†’ <span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a></span></span></span></span></div></blockquote></div></small></div>getAppArgs</span><span class="alectryon-token">[</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>0</var><b>: </b><span><span class="fn">?m.16631</span></span></span></div></blockquote></div></small></div>0</span><span class="alectryon-token">]! </span><span class="alectryon-token"><span class="k">else</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>cond</var><b>: </b><span><a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a></span></span></div></blockquote></div></small></div><span class="nv">cond</span></span><span class="alectryon-token">

  </span><span class="alectryon-token"><span class="k">if</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>done</var><b>: </b><span><span class="fn">?m.16422</span></span></span></div></blockquote></div></small></div><span class="nv">done</span></span><span class="alectryon-token">.</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>contains</var><b>: </b><span><span class="fn">{<span class="fn">Î±</span> : <span class="fn">Type ?u.16982</span>} â†’ <span class="fn">[<span class="fn">inst</span> : <span class="fn"><a href="../../.././Init/Prelude.html#BEq">BEq</a> <span class="fn">Î±</span></span>] â†’ <span class="fn"><span class="fn"><a href="../../.././Init/Prelude.html#List">List</a> <span class="fn">Î±</span></span> â†’ <span class="fn"><span class="fn">Î±</span> â†’ <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span></span></span></div></blockquote></div></small></div>contains</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>cond</var><b>: </b><span><span class="fn">?m.16542</span></span></span></div></blockquote></div></small></div><span class="nv">cond</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><span class="k">then</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><span class="k">return</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>()</var><b>: </b><span><a href="../../.././Init/Prelude.html#Unit">Unit</a></span></span></div></blockquote></div></small></div>()</span><span class="alectryon-token">
  </span><span class="alectryon-token"><span class="k">let</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>no_split</var><b>: </b><span><span class="fn">?m.17196</span></span></span></div></blockquote></div></small></div><span class="nv">no_split</span></span><span class="alectryon-token"> â† </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>valueKnown</var><b>: </b><span><span class="fn"><a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a> â†’ <span class="fn"><a href="../../.././Lean/Elab/Tactic/Basic.html#Lean.Elab.Tactic.TacticM">TacticM</a> <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span></div></blockquote></div></small></div>valueKnown</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>cond</var><b>: </b><span><span class="fn">?m.16542</span></span></span></div></blockquote></div></small></div><span class="nv">cond</span></span><span class="alectryon-token">
  </span><span class="alectryon-token"><span class="k">if</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>no_split</var><b>: </b><span><span class="fn">?m.17196</span></span></span></div></blockquote></div></small></div><span class="nv">no_split</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><span class="k">then</span></span><span class="alectryon-token">
    </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>tac_and_then</var><b>: </b><span><span class="fn"><span class="fn"><a href="../../.././Lean/Elab/Tactic/Basic.html#Lean.Elab.Tactic.TacticM">TacticM</a> <a href="../../.././Init/Prelude.html#Unit">Unit</a></span> â†’ <span class="fn"><a href="../../.././Lean/Elab/Tactic/Basic.html#Lean.Elab.Tactic.TacticM">TacticM</a> <a href="../../.././Init/Prelude.html#Unit">Unit</a></span> â†’ <span class="fn"><a href="../../.././Lean/Elab/Tactic/Basic.html#Lean.Elab.Tactic.TacticM">TacticM</a> <a href="../../.././Init/Prelude.html#Unit">Unit</a></span></span></span></span></div></blockquote></div></small></div>tac_and_then</span><span class="alectryon-token"> (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>reduceIfsAt</var><b>: </b><span><span class="fn"><a href="../../.././Lean/Elab/Tactic/Location.html#Lean.Elab.Tactic.Location">Location</a> â†’ <span class="fn"><a href="../../.././Lean/Elab/Tactic/Basic.html#Lean.Elab.Tactic.TacticM">TacticM</a> <a href="../../.././Init/Prelude.html#Unit">Unit</a></span></span></span></span></div></blockquote></div></small></div>reduceIfsAt</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>loc</var><b>: </b><span><a href="../../.././Lean/Elab/Tactic/Location.html#Lean.Elab.Tactic.Location">Location</a></span></span></div></blockquote></div></small></div><span class="nv">loc</span></span><span class="alectryon-token">) (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>splitIfsCore</var><b>: </b><span><span class="fn"><a href="../../.././Lean/Elab/Tactic/Location.html#Lean.Elab.Tactic.Location">Location</a> â†’ <span class="fn"><span class="fn"><a href="../../.././Init/System/IO.html#IO.Ref">IO.Ref</a> (<span class="fn"><a href="../../.././Init/Prelude.html#List">List</a> <a href="../../.././Init/Prelude.html#Lean.Name">Name</a></span>)</span> â†’ <span class="fn"><span class="fn"><a href="../../.././Init/Prelude.html#List">List</a> <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a></span> â†’ <span class="fn"><a href="../../.././Lean/Elab/Tactic/Basic.html#Lean.Elab.Tactic.TacticM">TacticM</a> <a href="../../.././Init/Prelude.html#Unit">Unit</a></span></span></span></span></span></span></div></blockquote></div></small></div><span class="nv">splitIfsCore</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>loc</var><b>: </b><span><a href="../../.././Lean/Elab/Tactic/Location.html#Lean.Elab.Tactic.Location">Location</a></span></span></div></blockquote></div></small></div><span class="nv">loc</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>hNames</var><b>: </b><span><span class="fn"><a href="../../.././Init/System/IO.html#IO.Ref">IO.Ref</a> (<span class="fn"><a href="../../.././Init/Prelude.html#List">List</a> <a href="../../.././Init/Prelude.html#Lean.Name">Name</a></span>)</span></span></span></div></blockquote></div></small></div><span class="nv">hNames</span></span><span class="alectryon-token"> (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>cond</var><b>: </b><span><span class="fn">?m.16542</span></span></span></div></blockquote></div></small></div><span class="nv">cond</span></span><span class="alectryon-token">::</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>done</var><b>: </b><span><span class="fn">?m.16422</span></span></span></div></blockquote></div></small></div><span class="nv">done</span></span><span class="alectryon-token">) <|> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>pure</var><b>: </b><span><span class="fn">{<span class="fn">f</span> : <span class="fn"><span class="fn">Type ?u.17296</span> â†’ <span class="fn">Type ?u.17295</span></span>} â†’ <span class="fn">[<span class="fn">self</span> : <span class="fn"><a href="../../.././Init/Prelude.html#Pure">Pure</a> <span class="fn">f</span></span>] â†’ <span class="fn">{<span class="fn">Î±</span> : <span class="fn">Type ?u.17296</span>} â†’ <span class="fn"><span class="fn">Î±</span> â†’ <span class="fn"><span class="fn">f</span> <span class="fn">Î±</span></span></span></span></span></span></span></span></div></blockquote></div></small></div>pure</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>()</var><b>: </b><span><a href="../../.././Init/Prelude.html#Unit">Unit</a></span></span></div></blockquote></div></small></div>()</span><span class="alectryon-token">)
  </span><span class="alectryon-token"><span class="k">else</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><span class="k">do</span></span><span class="alectryon-token">
    </span><span class="alectryon-token"><span class="k">let</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>hName</var><b>: </b><span><span class="fn">?m.17572</span></span></span></div></blockquote></div></small></div><span class="nv">hName</span></span><span class="alectryon-token"> â† </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>getNextName</var><b>: </b><span><span class="fn"><span class="fn"><a href="../../.././Init/System/IO.html#IO.Ref">IO.Ref</a> (<span class="fn"><a href="../../.././Init/Prelude.html#List">List</a> <a href="../../.././Init/Prelude.html#Lean.Name">Name</a></span>)</span> â†’ <span class="fn"><a href="../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">MetaM</a> <a href="../../.././Init/Prelude.html#Lean.Name">Name</a></span></span></span></span></div></blockquote></div></small></div>getNextName</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>hNames</var><b>: </b><span><span class="fn"><a href="../../.././Init/System/IO.html#IO.Ref">IO.Ref</a> (<span class="fn"><a href="../../.././Init/Prelude.html#List">List</a> <a href="../../.././Init/Prelude.html#Lean.Name">Name</a></span>)</span></span></span></div></blockquote></div></small></div><span class="nv">hNames</span></span><span class="alectryon-token">
    </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>tac_and_then</var><b>: </b><span><span class="fn"><span class="fn"><a href="../../.././Lean/Elab/Tactic/Basic.html#Lean.Elab.Tactic.TacticM">TacticM</a> <a href="../../.././Init/Prelude.html#Unit">Unit</a></span> â†’ <span class="fn"><a href="../../.././Lean/Elab/Tactic/Basic.html#Lean.Elab.Tactic.TacticM">TacticM</a> <a href="../../.././Init/Prelude.html#Unit">Unit</a></span> â†’ <span class="fn"><a href="../../.././Lean/Elab/Tactic/Basic.html#Lean.Elab.Tactic.TacticM">TacticM</a> <a href="../../.././Init/Prelude.html#Unit">Unit</a></span></span></span></span></div></blockquote></div></small></div>tac_and_then</span><span class="alectryon-token"> (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>splitIf1</var><b>: </b><span><span class="fn"><a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a> â†’ <span class="fn"><a href="../../.././Init/Prelude.html#Lean.Name">Name</a> â†’ <span class="fn"><a href="../../.././Lean/Elab/Tactic/Location.html#Lean.Elab.Tactic.Location">Location</a> â†’ <span class="fn"><a href="../../.././Lean/Elab/Tactic/Basic.html#Lean.Elab.Tactic.TacticM">TacticM</a> <a href="../../.././Init/Prelude.html#Unit">Unit</a></span></span></span></span></span></span></div></blockquote></div></small></div>splitIf1</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>cond</var><b>: </b><span><span class="fn">?m.16542</span></span></span></div></blockquote></div></small></div><span class="nv">cond</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>hName</var><b>: </b><span><span class="fn">?m.17572</span></span></span></div></blockquote></div></small></div><span class="nv">hName</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>loc</var><b>: </b><span><a href="../../.././Lean/Elab/Tactic/Location.html#Lean.Elab.Tactic.Location">Location</a></span></span></div></blockquote></div></small></div><span class="nv">loc</span></span><span class="alectryon-token">) ((</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>splitIfsCore</var><b>: </b><span><span class="fn"><a href="../../.././Lean/Elab/Tactic/Location.html#Lean.Elab.Tactic.Location">Location</a> â†’ <span class="fn"><span class="fn"><a href="../../.././Init/System/IO.html#IO.Ref">IO.Ref</a> (<span class="fn"><a href="../../.././Init/Prelude.html#List">List</a> <a href="../../.././Init/Prelude.html#Lean.Name">Name</a></span>)</span> â†’ <span class="fn"><span class="fn"><a href="../../.././Init/Prelude.html#List">List</a> <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a></span> â†’ <span class="fn"><a href="../../.././Lean/Elab/Tactic/Basic.html#Lean.Elab.Tactic.TacticM">TacticM</a> <a href="../../.././Init/Prelude.html#Unit">Unit</a></span></span></span></span></span></span></div></blockquote></div></small></div><span class="nv">splitIfsCore</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>loc</var><b>: </b><span><a href="../../.././Lean/Elab/Tactic/Location.html#Lean.Elab.Tactic.Location">Location</a></span></span></div></blockquote></div></small></div><span class="nv">loc</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>hNames</var><b>: </b><span><span class="fn"><a href="../../.././Init/System/IO.html#IO.Ref">IO.Ref</a> (<span class="fn"><a href="../../.././Init/Prelude.html#List">List</a> <a href="../../.././Init/Prelude.html#Lean.Name">Name</a></span>)</span></span></span></div></blockquote></div></small></div><span class="nv">hNames</span></span><span class="alectryon-token"> (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>cond</var><b>: </b><span><span class="fn">?m.16542</span></span></span></div></blockquote></div></small></div><span class="nv">cond</span></span><span class="alectryon-token">::</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>done</var><b>: </b><span><span class="fn">?m.16422</span></span></span></div></blockquote></div></small></div><span class="nv">done</span></span><span class="alectryon-token">)) <|> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>pure</var><b>: </b><span><span class="fn">{<span class="fn">f</span> : <span class="fn"><span class="fn">Type ?u.17616</span> â†’ <span class="fn">Type ?u.17615</span></span>} â†’ <span class="fn">[<span class="fn">self</span> : <span class="fn"><a href="../../.././Init/Prelude.html#Pure">Pure</a> <span class="fn">f</span></span>] â†’ <span class="fn">{<span class="fn">Î±</span> : <span class="fn">Type ?u.17616</span>} â†’ <span class="fn"><span class="fn">Î±</span> â†’ <span class="fn"><span class="fn">f</span> <span class="fn">Î±</span></span></span></span></span></span></span></span></div></blockquote></div></small></div>pure</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>()</var><b>: </b><span><a href="../../.././Init/Prelude.html#Unit">Unit</a></span></span></div></blockquote></div></small></div>()</span><span class="alectryon-token">)

/-- Splits all if-then-else-expressions into multiple goals.
Given a goal of the form `g (if p then x else y)`, `split_ifs` will produce
two goals: `p âŠ¢ g x` and `Â¬p âŠ¢ g y`.
If there are multiple ite-expressions, then `split_ifs` will split them all,
starting with a top-most one whose condition does not contain another
ite-expression.
`split_ifs at *` splits all ite-expressions in all hypotheses as well as the goal.
`split_ifs with hâ‚ hâ‚‚ hâ‚ƒ` overrides the default names for the hypotheses.
-/
</span><span class="alectryon-token"><span class="k">syntax</span></span><span class="alectryon-token"> (</span><span class="alectryon-token"><span class="k">name</span></span><span class="alectryon-token"> := </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>splitIfs</var><b>: </b><span><a href="../../.././Init/Prelude.html#Lean.ParserDescr">ParserDescr</a></span></span></div></blockquote></div></small></div>splitIfs</span><span class="alectryon-token">) "split_ifs" (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ppSpace</var><b>: </b><span><a href="../../.././Lean/Parser/Basic.html#Lean.Parser.Parser">Parser.Parser</a></span></span></div></blockquote></div></small></div>ppSpace</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>location</var><b>: </b><span><a href="../../.././Init/Prelude.html#Lean.ParserDescr">ParserDescr</a></span></span></div></blockquote></div></small></div>location</span><span class="alectryon-token">)? (" with " (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>colGt</var><b>: </b><span><span class="fn"><span class="fn"><a href="../../.././Init/Prelude.html#optParam">optParam</a> <a href="../../.././Init/Prelude.html#String">String</a> <span class="fn">&quotcheckColGt&quot</span></span> â†’ <a href="../../.././Lean/Parser/Basic.html#Lean.Parser.Parser">Parser.Parser</a></span></span></span></div></blockquote></div></small></div>colGt</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>binderIdent</var><b>: </b><span><a href="../../.././Init/Prelude.html#Lean.ParserDescr">ParserDescr</a></span></span></div></blockquote></div></small></div>binderIdent</span><span class="alectryon-token">)+)? : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>tactic</var><b>: </b><span><a href="../../.././Init/Notation.html#Lean.Parser.Category">Parser.Category</a></span></span></div></blockquote></div></small></div>tactic</span><span class="alectryon-token">

</span><span class="alectryon-token"><span class="k">elab_rules</span></span><span class="alectryon-token"> : tactic
| `(tactic| </span><span class="alectryon-token"><span class="k">split_ifs</span></span><span class="alectryon-token"> $[$</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>loc</var><b>: </b><span><span class="fn">?m.21616</span></span></span></div></blockquote></div></small></div><span class="nv">loc</span></span><span class="alectryon-token">:</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>location</var><b>: </b><span><a href="../../.././Init/Prelude.html#Lean.ParserDescr">ParserDescr</a></span></span></div></blockquote></div></small></div><span class="k">location</span></span><span class="alectryon-token">]? $[</span><span class="alectryon-token"><span class="k">with</span></span><span class="alectryon-token"> $</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>withArg</var><b>: </b><span><span class="fn"><span class="fn">?m.21887</span> <span class="fn">xâœ</span></span></span></span></div></blockquote></div></small></div><span class="nv">withArg</span></span><span class="alectryon-token">*]?) =>
  </span><span class="alectryon-token"><span class="k">let</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>loc</var><b>: </b><span><span class="fn">?m.22060</span></span></span></div></blockquote></div></small></div><span class="nv">loc</span></span><span class="alectryon-token"> := </span><span class="alectryon-token"><span class="k">match</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>loc</var><b>: </b><span><span class="fn"><span class="fn">?m.21504</span> <span class="fn">xâœÂ¹</span></span></span></span></div></blockquote></div></small></div><span class="nv">loc</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><span class="k">with</span></span><span class="alectryon-token">
  | </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>none</var><b>: </b><span><span class="fn">{<span class="fn">Î±</span> : <span class="fn">Type ?u.22538</span>} â†’ <span class="fn"><a href="../../.././Init/Prelude.html#Option">Option</a> <span class="fn">Î±</span></span></span></span></span></div></blockquote></div></small></div>none</span><span class="alectryon-token"> => </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Location.targets</var><b>: </b><span><span class="fn"><span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <a href="../../.././Init/Prelude.html#Lean.Syntax">Syntax</a></span> â†’ <span class="fn"><a href="../../.././Init/Prelude.html#Bool">Bool</a> â†’ <a href="../../.././Lean/Elab/Tactic/Location.html#Lean.Elab.Tactic.Location">Location</a></span></span></span></span></div></blockquote></div></small></div>Location.targets</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>#[]</var><b>: </b><span><span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <span class="fn">?m.22547</span></span></span></span></div></blockquote></div></small></div>#[]</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>true</var><b>: </b><span><a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></div></blockquote></div></small></div>true</span><span class="alectryon-token">
  | </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>some</var><b>: </b><span><span class="fn">{<span class="fn">Î±</span> : <span class="fn">Type ?u.22551</span>} â†’ <span class="fn"><span class="fn">Î±</span> â†’ <span class="fn"><a href="../../.././Init/Prelude.html#Option">Option</a> <span class="fn">Î±</span></span></span></span></span></span></div></blockquote></div></small></div>some</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>loc</var><b>: </b><span><span class="fn"><a href="../../.././Init/Prelude.html#Lean.TSyntax">TSyntax</a> <span class="fn">`Lean.Parser.Tactic.location</span></span></span></span></div></blockquote></div></small></div><span class="nv">loc</span></span><span class="alectryon-token"> => </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>expandLocation</var><b>: </b><span><span class="fn"><a href="../../.././Init/Prelude.html#Lean.Syntax">Syntax</a> â†’ <a href="../../.././Lean/Elab/Tactic/Location.html#Lean.Elab.Tactic.Location">Location</a></span></span></span></div></blockquote></div></small></div>expandLocation</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>loc</var><b>: </b><span><span class="fn"><a href="../../.././Init/Prelude.html#Lean.TSyntax">TSyntax</a> <span class="fn">`Lean.Parser.Tactic.location</span></span></span></span></div></blockquote></div></small></div><span class="nv">loc</span></span><span class="alectryon-token">
  </span><span class="alectryon-token"><span class="k">let</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>names</var><b>: </b><span><span class="fn">?m.22064</span></span></span></div></blockquote></div></small></div><span class="nv">names</span></span><span class="alectryon-token"> := </span><span class="alectryon-token"><span class="k">match</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>withArg</var><b>: </b><span><span class="fn"><span class="fn">?m.21887</span> <span class="fn">xâœ</span></span></span></span></div></blockquote></div></small></div><span class="nv">withArg</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><span class="k">with</span></span><span class="alectryon-token">
  | </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>none</var><b>: </b><span><span class="fn">{<span class="fn">Î±</span> : <span class="fn">Type ?u.22715</span>} â†’ <span class="fn"><a href="../../.././Init/Prelude.html#Option">Option</a> <span class="fn">Î±</span></span></span></span></span></div></blockquote></div></small></div>none</span><span class="alectryon-token"> => </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>[]</var><b>: </b><span><span class="fn"><a href="../../.././Init/Prelude.html#List">List</a> <span class="fn">?m.22725</span></span></span></span></div></blockquote></div></small></div>[]</span><span class="alectryon-token">
  | </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>some</var><b>: </b><span><span class="fn">{<span class="fn">Î±</span> : <span class="fn">Type ?u.22727</span>} â†’ <span class="fn"><span class="fn">Î±</span> â†’ <span class="fn"><a href="../../.././Init/Prelude.html#Option">Option</a> <span class="fn">Î±</span></span></span></span></span></span></div></blockquote></div></small></div>some</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>args</var><b>: </b><span><span class="fn"><a href="../../.././Init/Prelude.html#Lean.TSyntaxArray">TSyntaxArray</a> <span class="fn">`Lean.binderIdent</span></span></span></span></div></blockquote></div></small></div><span class="nv">args</span></span><span class="alectryon-token"> => </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>args</var><b>: </b><span><span class="fn"><a href="../../.././Init/Prelude.html#Lean.TSyntaxArray">TSyntaxArray</a> <span class="fn">`Lean.binderIdent</span></span></span></span></div></blockquote></div></small></div><span class="nv">args</span></span><span class="alectryon-token">.</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>map</var><b>: </b><span><span class="fn">{<span class="fn">Î±</span> : <span class="fn">Type ?u.22742</span>} â†’ <span class="fn">{<span class="fn">Î²</span> : <span class="fn">Type ?u.22741</span>} â†’ <span class="fn">(<span class="fn"><span class="fn">Î±</span> â†’ <span class="fn">Î²</span></span>) â†’ <span class="fn"><span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <span class="fn">Î±</span></span> â†’ <span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <span class="fn">Î²</span></span></span></span></span></span></span></span></div></blockquote></div></small></div>map</span><span class="alectryon-token"> (Î» </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span><span class="fn">?m.22750</span></span></span></div></blockquote></div></small></div><span class="nv">s</span></span><span class="alectryon-token"> => </span><span class="alectryon-token"><span class="k">if</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><span class="k">let</span></span><span class="alectryon-token"> `(</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>binderIdent</var><b>: </b><span><a href="../../.././Init/Prelude.html#Lean.ParserDescr">ParserDescr</a></span></span></div></blockquote></div></small></div>binderIdent</span><span class="alectryon-token">| $</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span><span class="fn">?m.22777</span></span></span></div></blockquote></div></small></div><span class="nv">x</span></span><span class="alectryon-token">:ident) := </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span><span class="fn">?m.22750</span></span></span></div></blockquote></div></small></div><span class="nv">s</span></span><span class="alectryon-token">
                                  </span><span class="alectryon-token"><span class="k">then</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>x</var><b>: </b><span><span class="fn">?m.22777</span></span></span></div></blockquote></div></small></div><span class="nv">x</span></span><span class="alectryon-token">.</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>getId</var><b>: </b><span><span class="fn"><a href="../../.././Init/Meta.html#Lean.Syntax.Ident">Ident</a> â†’ <a href="../../.././Init/Prelude.html#Lean.Name">Name</a></span></span></span></div></blockquote></div></small></div>getId</span><span class="alectryon-token">
                                  </span><span class="alectryon-token"><span class="k">else</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>`_</var><b>: </b><span><a href="../../.././Init/Prelude.html#Lean.Name">Name</a></span></span></div></blockquote></div></small></div>`_</span><span class="alectryon-token">) |>.</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>toList</var><b>: </b><span><span class="fn">{<span class="fn">Î±</span> : <span class="fn">Type ?u.22891</span>} â†’ <span class="fn"><span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <span class="fn">Î±</span></span> â†’ <span class="fn"><a href="../../.././Init/Prelude.html#List">List</a> <span class="fn">Î±</span></span></span></span></span></span></div></blockquote></div></small></div>toList</span><span class="alectryon-token">
  </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>withMainContext</var><b>: </b><span><span class="fn">{<span class="fn">Î±</span> : <span class="fn">Type</span>} â†’ <span class="fn"><span class="fn"><a href="../../.././Lean/Elab/Tactic/Basic.html#Lean.Elab.Tactic.TacticM">TacticM</a> <span class="fn">Î±</span></span> â†’ <span class="fn"><a href="../../.././Lean/Elab/Tactic/Basic.html#Lean.Elab.Tactic.TacticM">TacticM</a> <span class="fn">Î±</span></span></span></span></span></span></div></blockquote></div></small></div>withMainContext</span><span class="alectryon-token"> </span><span class="alectryon-token"><span class="k">do</span></span><span class="alectryon-token">
    </span><span class="alectryon-token"><span class="k">let</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>names</var><b>: </b><span><span class="fn">?m.22412</span></span></span></div></blockquote></div></small></div><span class="nv">names</span></span><span class="alectryon-token"> â† </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>IO.mkRef</var><b>: </b><span><span class="fn">{<span class="fn">Î±</span> : <span class="fn">Type</span>} â†’ <span class="fn"><span class="fn">Î±</span> â†’ <span class="fn"><a href="../../.././Init/System/IO.html#BaseIO">BaseIO</a> (<span class="fn"><a href="../../.././Init/System/IO.html#IO.Ref">IO.Ref</a> <span class="fn">Î±</span></span>)</span></span></span></span></span></div></blockquote></div></small></div>IO.mkRef</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>names</var><b>: </b><span><span class="fn">?m.22064</span></span></span></div></blockquote></div></small></div><span class="nv">names</span></span><span class="alectryon-token">
    </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>splitIfsCore</var><b>: </b><span><span class="fn"><a href="../../.././Lean/Elab/Tactic/Location.html#Lean.Elab.Tactic.Location">Location</a> â†’ <span class="fn"><span class="fn"><a href="../../.././Init/System/IO.html#IO.Ref">IO.Ref</a> (<span class="fn"><a href="../../.././Init/Prelude.html#List">List</a> <a href="../../.././Init/Prelude.html#Lean.Name">Name</a></span>)</span> â†’ <span class="fn"><span class="fn"><a href="../../.././Init/Prelude.html#List">List</a> <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a></span> â†’ <span class="fn"><a href="../../.././Lean/Elab/Tactic/Basic.html#Lean.Elab.Tactic.TacticM">TacticM</a> <a href="../../.././Init/Prelude.html#Unit">Unit</a></span></span></span></span></span></span></div></blockquote></div></small></div>splitIfsCore</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>loc</var><b>: </b><span><span class="fn">?m.22060</span></span></span></div></blockquote></div></small></div><span class="nv">loc</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>names</var><b>: </b><span><span class="fn">?m.22412</span></span></span></div></blockquote></div></small></div><span class="nv">names</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>[]</var><b>: </b><span><span class="fn"><a href="../../.././Init/Prelude.html#List">List</a> <span class="fn">?m.22425</span></span></span></span></div></blockquote></div></small></div>[]</span><span class="alectryon-token">
</span></span></pre></article></body></html>