<html lang="en"><head><meta charset="UTF-8"></meta><meta name="viewport" content="width=device-width, initial-scale=1"></meta><link rel="stylesheet" href="../.././style.css"></link><link rel="stylesheet" href="../.././src/pygments.css"></link><link rel="shortcut icon" href="../.././favicon.ico"></link><link rel="prefetch" href="../.././/declarations/declaration-data.bmp" as="image"></link><title>Lean.Elab.Quotation</title><script defer="true" src="../.././mathjax-config.js"></script><script defer="true" src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script defer="true" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script><script>const SITE_ROOT="../.././";</script><script>const MODULE_NAME="Lean.Elab.Quotation";</script><script type="module" src="../.././nav.js"></script><script type="module" src="../.././search.js"></script><script type="module" src="../.././how-about.js"></script><script type="module" src="../.././instances.js"></script><script type="module" src="../.././importedBy.js"></script></head><body><input id="nav_toggle" type="checkbox"></input><header><h1><label for="nav_toggle"></label>Documentation</h1><p class="header_filename break_within">Lean.Elab.Quotation</p><form action="https://google.com/search" method="get" id="search_form"><input type="hidden" name="sitesearch" value="https://leanprover-community.github.io/mathlib_docs"></input><input type="text" name="q" autocomplete="off"></input><button>Google site search</button></form></header><nav class="internal_nav"><h3><a class="break_within" href="#top">Lean.Elab.Quotation</a></h3><p class="gh_nav_link"><a href="https://github.com/leanprover/lean4/blob/9b406132070ba483ba6b7c698b8d76b59a67a16a/src/Lean/Elab/Quotation.lean">source</a></p><div class="imports"><details><summary>Imports</summary><ul><li><a href="../.././Init.html">Init</a></li><li><a href="../.././Lean/ResolveName.html">Lean.ResolveName</a></li><li><a href="../.././Lean/Syntax.html">Lean.Syntax</a></li><li><a href="../.././Lean/Elab/Syntax.html">Lean.Elab.Syntax</a></li><li><a href="../.././Lean/Elab/Term.html">Lean.Elab.Term</a></li><li><a href="../.././Lean/Parser/Syntax.html">Lean.Parser.Syntax</a></li><li><a href="../.././Lean/Elab/Quotation/Precheck.html">Lean.Elab.Quotation.Precheck</a></li><li><a href="../.././Lean/Elab/Quotation/Util.html">Lean.Elab.Quotation.Util</a></li></ul></details><details><summary>Imported by</summary><ul id="imported-by-Lean.Elab.Quotation" class="imported-by-list"></ul></details></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.Quotation.mkTuple">Lean.Elab.Term.Quotation.mkTuple</a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.Quotation.resolveSectionVariable">Lean.Elab.Term.Quotation.resolveSectionVariable</a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.Quotation.resolveSectionVariable.loop">Lean.Elab.Term.Quotation.resolveSectionVariable.loop</a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.Quotation.ArrayStxBuilder">Lean.Elab.Term.Quotation.ArrayStxBuilder</a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.Quotation.ArrayStxBuilder.empty">Lean.Elab.Term.Quotation.ArrayStxBuilder.empty</a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.Quotation.ArrayStxBuilder.build">Lean.Elab.Term.Quotation.ArrayStxBuilder.build</a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.Quotation.ArrayStxBuilder.push">Lean.Elab.Term.Quotation.ArrayStxBuilder.push</a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.Quotation.ArrayStxBuilder.append">Lean.Elab.Term.Quotation.ArrayStxBuilder.append</a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.Quotation.ArrayStxBuilder.mkNode">Lean.Elab.Term.Quotation.ArrayStxBuilder.mkNode</a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.Quotation.tryAddSyntaxNodeKindInfo">Lean.Elab.Term.Quotation.tryAddSyntaxNodeKindInfo</a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.Quotation.instQuotePreresolvedMkStr1">Lean.Elab.Term.Quotation.instQuotePreresolvedMkStr1</a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.Quotation.addNamedQuotInfo">Lean.Elab.Term.Quotation.addNamedQuotInfo</a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.Quotation.getQuotKind">Lean.Elab.Term.Quotation.getQuotKind</a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.Quotation.mkSyntaxQuotation">Lean.Elab.Term.Quotation.mkSyntaxQuotation</a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.Quotation.stxQuot.expand">Lean.Elab.Term.Quotation.stxQuot.expand</a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.Quotation.commandElab_stx_quot_">Lean.Elab.Term.Quotation.commandElab_stx_quot_</a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.Quotation.HeadCheck">Lean.Elab.Term.Quotation.HeadCheck</a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.Quotation.MatchResult">Lean.Elab.Term.Quotation.MatchResult</a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.Quotation.HeadInfo">Lean.Elab.Term.Quotation.HeadInfo</a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.Quotation.IdxSet">Lean.Elab.Term.Quotation.IdxSet</a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.Quotation.match_syntax.expand">Lean.Elab.Term.Quotation.match_syntax.expand</a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.Quotation.elabMatchSyntax">Lean.Elab.Term.Quotation.elabMatchSyntax</a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.Quotation.elabNoErrorIfUnused">Lean.Elab.Term.Quotation.elabNoErrorIfUnused</a></div></nav><main>
<div class="decl" id="Lean.Elab.Term.Quotation.mkTuple"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/9b406132070ba483ba6b7c698b8d76b59a67a16a/src/Lean/Elab/Quotation.lean#L56-L61">source</a></div><div class="decl_header"><span class="decl_kind">partial def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Quotation.html#Lean.Elab.Term.Quotation.mkTuple">Lean.Elab.Term.Quotation.mkTuple</a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn"><a href="../.././Init/Prelude.html#Array">Array</a> <a href="../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a></span> → <span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <a href="../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a></span></span></div></div></div></div><div class="decl" id="Lean.Elab.Term.Quotation.resolveSectionVariable"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/9b406132070ba483ba6b7c698b8d76b59a67a16a/src/Lean/Elab/Quotation.lean#L63-L74">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Quotation.html#Lean.Elab.Term.Quotation.resolveSectionVariable">Lean.Elab.Term.Quotation.resolveSectionVariable</a></span><span class="decl_args">
<span class="fn">(sectionVars : <span class="fn"><a href="../.././Lean/Data/NameMap.html#Lean.NameMap">Lean.NameMap</a> <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(id : <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/Prelude.html#List">List</a> (<span class="fn"><a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a> <a href="../.././Init/Prelude.html#Prod">×</a> <span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Init/Prelude.html#String">String</a></span></span>)</span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details></div></div><div class="decl" id="Lean.Elab.Term.Quotation.resolveSectionVariable.loop"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/9b406132070ba483ba6b7c698b8d76b59a67a16a/src/Lean/Elab/Quotation.lean#L66-L73">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Quotation.html#Lean.Elab.Term.Quotation.resolveSectionVariable.loop">Lean.Elab.Term.Quotation.resolveSectionVariable.loop</a></span><span class="decl_args">
<span class="fn">(sectionVars : <span class="fn"><a href="../.././Lean/Data/NameMap.html#Lean.NameMap">Lean.NameMap</a> <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(extractionResult : <a href="../.././Init/Prelude.html#Lean.MacroScopesView">Lean.MacroScopesView</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a> → <span class="fn"><span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Init/Prelude.html#String">String</a></span> → <span class="fn"><a href="../.././Init/Prelude.html#List">List</a> (<span class="fn"><a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a> <a href="../.././Init/Prelude.html#Prod">×</a> <span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Init/Prelude.html#String">String</a></span></span>)</span></span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li><li class="equation"><span class="fn"><span class="fn"><a href="../.././Lean/Elab/Quotation.html#Lean.Elab.Term.Quotation.resolveSectionVariable.loop">Lean.Elab.Term.Quotation.resolveSectionVariable.loop</a> <span class="fn">sectionVars</span> <span class="fn">extractionResult</span> <span class="fn">x</span> <span class="fn">x</span></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">[]</span></span></li></ul></details></div></div><div class="decl" id="Lean.Elab.Term.Quotation.ArrayStxBuilder"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/9b406132070ba483ba6b7c698b8d76b59a67a16a/src/Lean/Elab/Quotation.lean#L77-L77">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Quotation.html#Lean.Elab.Term.Quotation.ArrayStxBuilder">Lean.Elab.Term.Quotation.ArrayStxBuilder</a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn">Type</span></div></div><p>Transform sequence of pushes and appends into acceptable code</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../.././Lean/Elab/Quotation.html#Lean.Elab.Term.Quotation.ArrayStxBuilder">Lean.Elab.Term.Quotation.ArrayStxBuilder</a> <a href="../.././Init/Prelude.html#Eq">=</a> (<span class="fn"><span class="fn"><a href="../.././Init/Prelude.html#Array">Array</a> <a href="../.././Init/Meta.html#Lean.Syntax.Term">Lean.Term</a></span> <a href="../.././Init/Core.html#Sum">⊕</a> <a href="../.././Init/Meta.html#Lean.Syntax.Term">Lean.Term</a></span>)</span></li></ul></details></div></div><div class="decl" id="Lean.Elab.Term.Quotation.ArrayStxBuilder.empty"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/9b406132070ba483ba6b7c698b8d76b59a67a16a/src/Lean/Elab/Quotation.lean#L81-L81">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Quotation.html#Lean.Elab.Term.Quotation.ArrayStxBuilder.empty">Lean.Elab.Term.Quotation.ArrayStxBuilder.empty</a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././Lean/Elab/Quotation.html#Lean.Elab.Term.Quotation.ArrayStxBuilder">Lean.Elab.Term.Quotation.ArrayStxBuilder</a></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../.././Lean/Elab/Quotation.html#Lean.Elab.Term.Quotation.ArrayStxBuilder.empty">Lean.Elab.Term.Quotation.ArrayStxBuilder.empty</a> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../.././Init/Core.html#Sum.inl">Sum.inl</a> <span class="fn">#[]</span></span></span></li></ul></details></div></div><div class="decl" id="Lean.Elab.Term.Quotation.ArrayStxBuilder.build"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/9b406132070ba483ba6b7c698b8d76b59a67a16a/src/Lean/Elab/Quotation.lean#L83-L85">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Quotation.html#Lean.Elab.Term.Quotation.ArrayStxBuilder.build">Lean.Elab.Term.Quotation.ArrayStxBuilder.build</a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Quotation.html#Lean.Elab.Term.Quotation.ArrayStxBuilder">Lean.Elab.Term.Quotation.ArrayStxBuilder</a> → <a href="../.././Init/Meta.html#Lean.Syntax.Term">Lean.Term</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href="../.././Lean/Elab/Quotation.html#Lean.Elab.Term.Quotation.ArrayStxBuilder.build">Lean.Elab.Term.Quotation.ArrayStxBuilder.build</a> <span class="fn">x</span></span> <a href="../.././Init/Prelude.html#Eq">=</a>   <span class="fn">match <span class="fn">x</span> with
  | <span class="fn"><a href="../.././Init/Core.html#Sum.inr">Sum.inl</a> <span class="fn">elems</span></span> =&gt <span class="fn"><a href="../.././Init/Meta.html#Lean.Quote.quote">Lean.quote</a> <span class="fn">`term</span> <span class="fn">elems</span></span>
  | <span class="fn"><a href="../.././Init/Core.html#Sum.inr">Sum.inr</a> <span class="fn">arr</span></span> =&gt <span class="fn">arr</span></span></span></li></ul></details></div></div><div class="decl" id="Lean.Elab.Term.Quotation.ArrayStxBuilder.push"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/9b406132070ba483ba6b7c698b8d76b59a67a16a/src/Lean/Elab/Quotation.lean#L87-L90">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Quotation.html#Lean.Elab.Term.Quotation.ArrayStxBuilder.push">Lean.Elab.Term.Quotation.ArrayStxBuilder.push</a></span><span class="decl_args">
<span class="fn">(b : <a href="../.././Lean/Elab/Quotation.html#Lean.Elab.Term.Quotation.ArrayStxBuilder">Lean.Elab.Term.Quotation.ArrayStxBuilder</a>)</span></span>
<span class="decl_args">
<span class="fn">(elem : <a href="../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../.././Lean/Elab/Quotation.html#Lean.Elab.Term.Quotation.ArrayStxBuilder">Lean.Elab.Term.Quotation.ArrayStxBuilder</a></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details></div></div><div class="decl" id="Lean.Elab.Term.Quotation.ArrayStxBuilder.append"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/9b406132070ba483ba6b7c698b8d76b59a67a16a/src/Lean/Elab/Quotation.lean#L92-L93">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Quotation.html#Lean.Elab.Term.Quotation.ArrayStxBuilder.append">Lean.Elab.Term.Quotation.ArrayStxBuilder.append</a></span><span class="decl_args">
<span class="fn">(b : <a href="../.././Lean/Elab/Quotation.html#Lean.Elab.Term.Quotation.ArrayStxBuilder">Lean.Elab.Term.Quotation.ArrayStxBuilder</a>)</span></span>
<span class="decl_args">
<span class="fn">(arr : <a href="../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a>)</span></span>
<span class="decl_args">
<span class="fn">(appendName : <span class="fn"><a href="../.././Init/Prelude.html#optParam">optParam</a> <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a> <span class="fn">`Array.append</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../.././Lean/Elab/Quotation.html#Lean.Elab.Term.Quotation.ArrayStxBuilder">Lean.Elab.Term.Quotation.ArrayStxBuilder</a></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href="../.././Lean/Elab/Quotation.html#Lean.Elab.Term.Quotation.ArrayStxBuilder.append">Lean.Elab.Term.Quotation.ArrayStxBuilder.append</a> <span class="fn">b</span> <span class="fn">arr</span> <span class="fn">appendName</span></span> <a href="../.././Init/Prelude.html#Eq">=</a>   <span class="fn"><a href="../.././Init/Core.html#Sum.inr">Sum.inr</a> (<span class="fn"><a href="../.././Init/Meta.html#Lean.Syntax.mkCApp">Lean.Syntax.mkCApp</a> <span class="fn">appendName</span> <span class="fn">#[<span class="fn"><a href="../.././Lean/Elab/Quotation.html#Lean.Elab.Term.Quotation.ArrayStxBuilder.build">Lean.Elab.Term.Quotation.ArrayStxBuilder.build</a> <span class="fn">b</span></span>, <span class="fn">{ <span class="fn">raw</span> := <span class="fn">arr</span> }</span>]</span></span>)</span></span></li></ul></details></div></div><div class="decl" id="Lean.Elab.Term.Quotation.ArrayStxBuilder.mkNode"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/9b406132070ba483ba6b7c698b8d76b59a67a16a/src/Lean/Elab/Quotation.lean#L95-L106">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Quotation.html#Lean.Elab.Term.Quotation.ArrayStxBuilder.mkNode">Lean.Elab.Term.Quotation.ArrayStxBuilder.mkNode</a></span><span class="decl_args">
<span class="fn">(b : <a href="../.././Lean/Elab/Quotation.html#Lean.Elab.Term.Quotation.ArrayStxBuilder">Lean.Elab.Term.Quotation.ArrayStxBuilder</a>)</span></span>
<span class="decl_args">
<span class="fn">(k : <a href="../.././Init/Prelude.html#Lean.SyntaxNodeKind">Lean.SyntaxNodeKind</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <a href="../.././Init/Meta.html#Lean.Syntax.Term">Lean.Term</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details></div></div><div class="decl" id="Lean.Elab.Term.Quotation.tryAddSyntaxNodeKindInfo"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/9b406132070ba483ba6b7c698b8d76b59a67a16a/src/Lean/Elab/Quotation.lean#L110-L117">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Quotation.html#Lean.Elab.Term.Quotation.tryAddSyntaxNodeKindInfo">Lean.Elab.Term.Quotation.tryAddSyntaxNodeKindInfo</a></span><span class="decl_args">
<span class="fn">(stx : <a href="../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a>)</span></span>
<span class="decl_args">
<span class="fn">(k : <a href="../.././Init/Prelude.html#Lean.SyntaxNodeKind">Lean.SyntaxNodeKind</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <a href="../.././Init/Prelude.html#Unit">Unit</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details></div></div><div class="decl" id="Lean.Elab.Term.Quotation.instQuotePreresolvedMkStr1"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/9b406132070ba483ba6b7c698b8d76b59a67a16a/src/Lean/Elab/Quotation.lean#L119-L122">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Quotation.html#Lean.Elab.Term.Quotation.instQuotePreresolvedMkStr1">Lean.Elab.Term.Quotation.instQuotePreresolvedMkStr1</a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/Meta.html#Lean.Quote">Lean.Quote</a> <a href="../.././Init/Prelude.html#Lean.Syntax.Preresolved">Lean.Syntax.Preresolved</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details></div></div><div class="decl" id="Lean.Elab.Term.Quotation.addNamedQuotInfo"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/9b406132070ba483ba6b7c698b8d76b59a67a16a/src/Lean/Elab/Quotation.lean#L208-L216">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Quotation.html#Lean.Elab.Term.Quotation.addNamedQuotInfo">Lean.Elab.Term.Quotation.addNamedQuotInfo</a></span><span class="decl_args">
<span class="fn">(stx : <a href="../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a>)</span></span>
<span class="decl_args">
<span class="fn">(k : <a href="../.././Init/Prelude.html#Lean.SyntaxNodeKind">Lean.SyntaxNodeKind</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <a href="../.././Init/Prelude.html#Lean.SyntaxNodeKind">Lean.SyntaxNodeKind</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details></div></div><div class="decl" id="Lean.Elab.Term.Quotation.getQuotKind"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/9b406132070ba483ba6b7c698b8d76b59a67a16a/src/Lean/Elab/Quotation.lean#L218-L228">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Quotation.html#Lean.Elab.Term.Quotation.getQuotKind">Lean.Elab.Term.Quotation.getQuotKind</a></span><span class="decl_args">
<span class="fn">(stx : <a href="../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <a href="../.././Init/Prelude.html#Lean.SyntaxNodeKind">Lean.SyntaxNodeKind</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details></div></div><div class="decl" id="Lean.Elab.Term.Quotation.mkSyntaxQuotation"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/9b406132070ba483ba6b7c698b8d76b59a67a16a/src/Lean/Elab/Quotation.lean#L230-L238">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Quotation.html#Lean.Elab.Term.Quotation.mkSyntaxQuotation">Lean.Elab.Term.Quotation.mkSyntaxQuotation</a></span><span class="decl_args">
<span class="fn">(stx : <a href="../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a>)</span></span>
<span class="decl_args">
<span class="fn">(kind : <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <a href="../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details></div></div><div class="decl" id="Lean.Elab.Term.Quotation.stxQuot.expand"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/9b406132070ba483ba6b7c698b8d76b59a67a16a/src/Lean/Elab/Quotation.lean#L255-L259">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Quotation.html#Lean.Elab.Term.Quotation.stxQuot.expand">Lean.Elab.Term.Quotation.stxQuot.expand</a></span><span class="decl_args">
<span class="fn">(stx : <a href="../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <a href="../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details></div></div><div class="decl" id="Lean.Elab.Term.Quotation.commandElab_stx_quot_"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/9b406132070ba483ba6b7c698b8d76b59a67a16a/src/Lean/Elab/Quotation.lean#L261-L262">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Quotation.html#Lean.Elab.Term.Quotation.commandElab_stx_quot_">Lean.Elab.Term.Quotation.commandElab_stx_quot_</a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././Init/Prelude.html#Lean.ParserDescr">Lean.ParserDescr</a></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details></div></div><div class="mod_doc"><h1 class="markdown-heading" id="match">match <a class="hover-link" href="#match">#</a></h1></div><div class="decl" id="Lean.Elab.Term.Quotation.HeadCheck"><div class="inductive"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/9b406132070ba483ba6b7c698b8d76b59a67a16a/src/Lean/Elab/Quotation.lean#L279-L296">source</a></div><div class="decl_header"><span class="decl_kind">inductive</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Quotation.html#Lean.Elab.Term.Quotation.HeadCheck">Lean.Elab.Term.Quotation.HeadCheck</a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn">Type</span></div></div><ul class="constructors"><li class="constructor" id="Lean.Elab.Term.Quotation.HeadCheck.unconditional"><div class="inductive_ctor_doc"><p>match step that always succeeds: _, x, `($x), ...</p></div>unconditional: <a href="../.././Lean/Elab/Quotation.html#Lean.Elab.Term.Quotation.HeadCheck">Lean.Elab.Term.Quotation.HeadCheck</a></li><li class="constructor" id="Lean.Elab.Term.Quotation.HeadCheck.shape"><div class="inductive_ctor_doc"><p>match step based on kind and, optionally, arity of discriminant
If <code>arity</code> is given, that number of new discriminants is introduced. <code>covered</code> patterns should then introduce the
same number of new patterns.
We actually check the arity at run time only in the case of <code>null</code> nodes since it should otherwise by implied by
the node kind.
without arity: `($x:k)
with arity: any quotation without an antiquotation head pattern</p></div>shape: <span class="fn"><span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Init/Prelude.html#Lean.SyntaxNodeKind">Lean.SyntaxNodeKind</a></span> → <span class="fn"><span class="fn"><a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Init/Prelude.html#Nat">Nat</a></span> → <a href="../.././Lean/Elab/Quotation.html#Lean.Elab.Term.Quotation.HeadCheck">Lean.Elab.Term.Quotation.HeadCheck</a></span></span></li><li class="constructor" id="Lean.Elab.Term.Quotation.HeadCheck.slice"><div class="inductive_ctor_doc"><p>Match step that succeeds on <code>null</code> nodes of arity at least <code>numPrefix + numSuffix</code>, introducing discriminants
for the first <code>numPrefix</code> children, one <code>null</code> node for those in between, and for the <code>numSuffix</code> last children.
example: <code>([$x, $xs,*, $y]) is </code>slice 2 2`</p></div>slice: <span class="fn"><a href="../.././Init/Prelude.html#Nat">Nat</a> → <a href="../.././Init/Prelude.html#Nat">Nat</a> → <a href="../.././Lean/Elab/Quotation.html#Lean.Elab.Term.Quotation.HeadCheck">Lean.Elab.Term.Quotation.HeadCheck</a></span></li><li class="constructor" id="Lean.Elab.Term.Quotation.HeadCheck.other"><div class="inductive_ctor_doc"><p>other, complicated match step that will probably only cover identical patterns
example: antiquotation splices `($[...]*)</p></div>other: <span class="fn"><a href="../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a> → <a href="../.././Lean/Elab/Quotation.html#Lean.Elab.Term.Quotation.HeadCheck">Lean.Elab.Term.Quotation.HeadCheck</a></span></li></ul><p>In a single match step, we match the first discriminant against the "head" of the first pattern of the first
alternative. This datatype describes what kind of check this involves, which helps other patterns decide if
they are covered by the same check and don't have to be checked again (see also <code><a href="../.././Lean/Elab/Quotation.html#Lean.Elab.Term.Quotation.MatchResult">MatchResult</a></code>).</p><details class="instances"><summary>Instances For</summary><ul id="instances-for-list-Lean.Elab.Term.Quotation.HeadCheck" class="instances-for-list"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.Quotation.MatchResult"><div class="inductive"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/9b406132070ba483ba6b7c698b8d76b59a67a16a/src/Lean/Elab/Quotation.lean#L301-L308">source</a></div><div class="decl_header"><span class="decl_kind">inductive</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Quotation.html#Lean.Elab.Term.Quotation.MatchResult">Lean.Elab.Term.Quotation.MatchResult</a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn">Type</span></div></div><ul class="constructors"><li class="constructor" id="Lean.Elab.Term.Quotation.MatchResult.covered"><div class="inductive_ctor_doc"><p>Pattern agrees with head check, remove and transform remaining alternative.
If <code>exhaustive</code> is <code>false</code>, <em>also</em> include unchanged alternative in the "no" branch.</p></div>covered: <span class="fn">(<span class="fn"><a href="../.././Lean/Elab/Quotation.html#_private.Lean.Elab.Quotation.0.Lean.Elab.Term.Quotation.Alt">Lean.Elab.Term.Quotation.Alt</a> → <span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <a href="../.././Lean/Elab/Quotation.html#_private.Lean.Elab.Quotation.0.Lean.Elab.Term.Quotation.Alt">Lean.Elab.Term.Quotation.Alt</a></span></span>) →
  <span class="fn"><a href="../.././Init/Prelude.html#Bool">Bool</a> → <a href="../.././Lean/Elab/Quotation.html#Lean.Elab.Term.Quotation.MatchResult">Lean.Elab.Term.Quotation.MatchResult</a></span></span></li><li class="constructor" id="Lean.Elab.Term.Quotation.MatchResult.uncovered"><div class="inductive_ctor_doc"><p>Pattern disagrees with head check, include in "no" branch only</p></div>uncovered: <a href="../.././Lean/Elab/Quotation.html#Lean.Elab.Term.Quotation.MatchResult">Lean.Elab.Term.Quotation.MatchResult</a></li><li class="constructor" id="Lean.Elab.Term.Quotation.MatchResult.undecided"><div class="inductive_ctor_doc"><p>Pattern is not quite sure yet; include unchanged in both branches</p></div>undecided: <a href="../.././Lean/Elab/Quotation.html#Lean.Elab.Term.Quotation.MatchResult">Lean.Elab.Term.Quotation.MatchResult</a></li></ul><p>Describe whether a pattern is covered by a head check (induced by the pattern itself or a different pattern).</p><details class="instances"><summary>Instances For</summary><ul id="instances-for-list-Lean.Elab.Term.Quotation.MatchResult" class="instances-for-list"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.Quotation.HeadInfo"><div class="structure"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/9b406132070ba483ba6b7c698b8d76b59a67a16a/src/Lean/Elab/Quotation.lean#L313-L319">source</a></div><div class="decl_header"><span class="decl_kind">structure</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Quotation.html#Lean.Elab.Term.Quotation.HeadInfo">Lean.Elab.Term.Quotation.HeadInfo</a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn">Type</span></div></div><ul class="structure_fields" id="Lean.Elab.Term.Quotation.HeadInfo.mk"><li id="Lean.Elab.Term.Quotation.HeadInfo.check" class="structure_field"><div class="structure_field_doc"><p>check induced by the pattern</p></div><div class="structure_field_info">check : <a href="../.././Lean/Elab/Quotation.html#Lean.Elab.Term.Quotation.HeadCheck">Lean.Elab.Term.Quotation.HeadCheck</a></div></li><li id="Lean.Elab.Term.Quotation.HeadInfo.onMatch" class="structure_field"><div class="structure_field_doc"><p>compute compatibility of pattern with given head check</p></div><div class="structure_field_info">onMatch : <span class="fn"><a href="../.././Lean/Elab/Quotation.html#Lean.Elab.Term.Quotation.HeadCheck">Lean.Elab.Term.Quotation.HeadCheck</a> → <a href="../.././Lean/Elab/Quotation.html#Lean.Elab.Term.Quotation.MatchResult">Lean.Elab.Term.Quotation.MatchResult</a></span></div></li><li id="Lean.Elab.Term.Quotation.HeadInfo.doMatch" class="structure_field"><div class="structure_field_doc"><p>actually run the specified head check, with the discriminant bound to <code>__discr</code></p></div><div class="structure_field_info">doMatch : <span class="fn">(<span class="fn"><span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Init/Meta.html#Lean.Syntax.Term">Lean.Term</a></span> → <span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <a href="../.././Init/Meta.html#Lean.Syntax.Term">Lean.Term</a></span></span>) → <span class="fn"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <a href="../.././Init/Meta.html#Lean.Syntax.Term">Lean.Term</a></span> → <span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <a href="../.././Init/Meta.html#Lean.Syntax.Term">Lean.Term</a></span></span></span></div></li></ul><p>All necessary information on a pattern head.</p><details class="instances"><summary>Instances For</summary><ul id="instances-for-list-Lean.Elab.Term.Quotation.HeadInfo" class="instances-for-list"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.Quotation.IdxSet"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/9b406132070ba483ba6b7c698b8d76b59a67a16a/src/Lean/Elab/Quotation.lean#L584-L584">source</a></div><div class="attributes">@[inline]</div>
<div class="decl_header"><span class="decl_kind">abbrev</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Quotation.html#Lean.Elab.Term.Quotation.IdxSet">Lean.Elab.Term.Quotation.IdxSet</a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn">Type</span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../.././Lean/Elab/Quotation.html#Lean.Elab.Term.Quotation.IdxSet">Lean.Elab.Term.Quotation.IdxSet</a> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../.././Lean/Data/HashSet.html#Lean.HashSet">Lean.HashSet</a> <a href="../.././Init/Prelude.html#Nat">Nat</a></span></span></li></ul></details></div></div><div class="decl" id="Lean.Elab.Term.Quotation.match_syntax.expand"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/9b406132070ba483ba6b7c698b8d76b59a67a16a/src/Lean/Elab/Quotation.lean#L648-L664">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Quotation.html#Lean.Elab.Term.Quotation.match_syntax.expand">Lean.Elab.Term.Quotation.match_syntax.expand</a></span><span class="decl_args">
<span class="fn">(stx : <a href="../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <a href="../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details></div></div><div class="decl" id="Lean.Elab.Term.Quotation.elabMatchSyntax"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/9b406132070ba483ba6b7c698b8d76b59a67a16a/src/Lean/Elab/Quotation.lean#L666-L667">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Quotation.html#Lean.Elab.Term.Quotation.elabMatchSyntax">Lean.Elab.Term.Quotation.elabMatchSyntax</a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElab">Lean.Elab.Term.TermElab</a></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../.././Lean/Elab/Quotation.html#Lean.Elab.Term.Quotation.elabMatchSyntax">Lean.Elab.Term.Quotation.elabMatchSyntax</a> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.adaptExpander">Lean.Elab.Term.adaptExpander</a> <a href="../.././Lean/Elab/Quotation.html#Lean.Elab.Term.Quotation.match_syntax.expand">Lean.Elab.Term.Quotation.match_syntax.expand</a></span></span></li></ul></details></div></div><div class="decl" id="Lean.Elab.Term.Quotation.elabNoErrorIfUnused"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/9b406132070ba483ba6b7c698b8d76b59a67a16a/src/Lean/Elab/Quotation.lean#L669-L672">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Quotation.html#Lean.Elab.Term.Quotation.elabNoErrorIfUnused">Lean.Elab.Term.Quotation.elabNoErrorIfUnused</a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElab">Lean.Elab.Term.TermElab</a></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details></div></div></main>
<nav class="nav"><iframe src="../.././/navbar.html" class="navframe" frameBorder="0"></iframe></nav></body></html>